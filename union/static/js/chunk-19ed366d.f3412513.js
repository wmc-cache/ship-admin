(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19ed366d"],{"135f":function(t,e,i){t.exports=i.p+"static/img/启动.33b27e3c.png"},"1d73":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"body"},[n("el-dialog",{attrs:{title:"设置",visible:t.dialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("button",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),n("div",[t._v("\n\t\t\t电机停转:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.stop_pwm,expression:"height_setting.stop_pwm"}],domProps:{value:t.height_setting.stop_pwm},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"stop_pwm",e.target.value)}}}),t._v("\n\t\t\t检查船状态间隔:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.check_status_interval,expression:"height_setting.check_status_interval"}],domProps:{value:t.height_setting.check_status_interval},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"check_status_interval",e.target.value)}}})]),t._v(" "),n("div",[t._v("\n\t\t\t检查网络连接状态间隔:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.check_network_interval,expression:"height_setting.check_network_interval"}],domProps:{value:t.height_setting.check_network_interval},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"check_network_interval",e.target.value)}}}),t._v("\n\t\t\t查找数量:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.find_points_num,expression:"height_setting.find_points_num"}],domProps:{value:t.height_setting.find_points_num},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"find_points_num",e.target.value)}}})]),t._v(" "),n("div",[t._v("\n\t\t\t前进最大速度:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.max_pwm,expression:"height_setting.max_pwm"}],domProps:{value:t.height_setting.max_pwm},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"max_pwm",e.target.value)}}}),t._v("\n\t\t\t后退最大速度:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.min_pwm,expression:"height_setting.min_pwm"}],domProps:{value:t.height_setting.min_pwm},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"min_pwm",e.target.value)}}})]),t._v(" "),n("div",[t._v("\n\t\t\tpid间隔:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.pid_interval,expression:"height_setting.pid_interval"}],domProps:{value:t.height_setting.pid_interval},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"pid_interval",e.target.value)}}}),t._v("\n\t\t\t电机前进分量:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.motor_forward,expression:"height_setting.motor_forward"}],domProps:{value:t.height_setting.motor_forward},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"motor_forward",e.target.value)}}})]),t._v(" "),n("div",[t._v("\n\t\t\t断网返航:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.network_backhome,expression:"height_setting.network_backhome"}],domProps:{value:t.height_setting.network_backhome},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"network_backhome",e.target.value)}}}),t._v("\n\t\t\t剩余电量返航:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.energy_backhome,expression:"height_setting.energy_backhome"}],domProps:{value:t.height_setting.energy_backhome},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"energy_backhome",e.target.value)}}})]),t._v(" "),n("div",[t._v("\n\t\t\t左电机正反桨页设置:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.left_motor_cw,expression:"height_setting.left_motor_cw"}],domProps:{value:t.height_setting.left_motor_cw},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"left_motor_cw",e.target.value)}}}),t._v("\n\t\t\t右电机正反桨页设置:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.right_motor_cw,expression:"height_setting.right_motor_cw"}],domProps:{value:t.height_setting.right_motor_cw},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"right_motor_cw",e.target.value)}}})]),t._v(" "),n("div",[t._v("\n\t\t\t大于多少米全速前进:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.full_speed_meter,expression:"height_setting.full_speed_meter"}],domProps:{value:t.height_setting.full_speed_meter},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"full_speed_meter",e.target.value)}}}),t._v("\n\t\t\tkp:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.kp,expression:"height_setting.kp"}],domProps:{value:t.height_setting.kp},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"kp",e.target.value)}}})]),t._v(" "),n("div",[t._v("\n\t\t\tki:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.ki,expression:"height_setting.ki"}],domProps:{value:t.height_setting.ki},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"ki",e.target.value)}}}),t._v("\n\t\t\tkd:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.kd,expression:"height_setting.kd"}],domProps:{value:t.height_setting.kd},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"kd",e.target.value)}}})]),t._v(" "),n("div",[t._v("\n\t\t\t抽水时间:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.draw_time,expression:"height_setting.draw_time"}],domProps:{value:t.height_setting.draw_time},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"draw_time",e.target.value)}}}),t._v("\n\t\t\t开机前等待时间:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.start_sleep_time,expression:"height_setting.start_sleep_time"}],domProps:{value:t.height_setting.start_sleep_time},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"start_sleep_time",e.target.value)}}})]),t._v(" "),n("div",[t._v("\n\t\t\t电机初始化时间:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.motor_init_time,expression:"height_setting.motor_init_time"}],domProps:{value:t.height_setting.motor_init_time},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"motor_init_time",e.target.value)}}}),t._v("\n\t\t\t电机转弯分量:"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height_setting.motor_steer,expression:"height_setting.motor_steer"}],domProps:{value:t.height_setting.motor_steer},on:{input:function(e){e.target.composing||t.$set(t.height_setting,"motor_steer",e.target.value)}}})]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.settingSure}},[t._v("确 定")])],1)]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"menu2"},[t._v("设备操作")]),t._v(" "),n("div",{staticClass:"menu3",on:{click:t.goIndex}},[t._v(" 返回")]),t._v(" "),n("img",{staticClass:"menu4",attrs:{src:i("4fe1"),alt:""},on:{click:t.dialog}}),t._v(" "),n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[n("div",{staticClass:"text",staticStyle:{"margin-top":"1vh","margin-bottom":"-1vw"}},[t._v("无人船智能云平台")]),t._v(" "),n("dv-decoration-5",{staticStyle:{width:"40vw",height:"5vh"}})],1),t._v(" "),n("div",{staticClass:"tip-item"},[n("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item1"},[n("div",{staticClass:"text"},[t._v("设备电量")]),t._v(" "),n("div",{staticClass:"num"},[t._v(t._s(t._f("valueFilter")(t.status_data.dump_energy)))])]),t._v(" "),n("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item2"},[n("div",{staticClass:"text"},[t._v("当前误差")]),t._v(" "),n("div",{staticClass:"num"},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("valueFilter")(t.status_data.lng_lat_error))+"m\n\t\t\t\t\t")])]),t._v(" "),n("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item3"},[n("div",{staticClass:"text"},[t._v("船头方向")]),t._v(" "),n("div",{staticClass:"num"},[t._v(t._s(t._f("valueFilter")(t.status_data.direction)))])]),t._v(" "),n("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item4"},[n("div",{staticClass:"text"},[t._v("速度")]),t._v(" "),n("div",{staticClass:"num"},[t._v(t._s(t._f("valueFilter")(t.status_data.speed)))])])])]),t._v(" "),n("div",{staticClass:"content-middle"},[n("div",{staticClass:"left"},[n("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"left1"},[n("dv-border-box-10",[n("div",{staticClass:"title"},[t._v(t._s(t.fmt(new Date)))]),t._v(" "),n("div",{staticClass:"tip"},[n("div",{staticClass:"left"},[n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{width:"8vw",height:"8vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"item-title"},[t._v("里程")]),t._v(" "),n("div",{staticClass:"item-num"},[t._v(t._s(t.status_data.run_distance))])]),t._v(" "),n("div",{staticStyle:{width:"8vw",height:"8vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"item-title"},[t._v("总里程")]),t._v(" "),n("div",{staticClass:"item-num"},[t._v(t._s(t.status_data.totle_distance))])])])]),t._v(" "),n("div",{staticClass:"right"},[n("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[n("div",{staticStyle:{width:"8vw",height:"8vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"item-title"},[t._v("时间")]),t._v(" "),n("div",{staticClass:"item-num"},[t._v(" "+t._s(t.status_data.runtime))])]),t._v(" "),n("div",{staticStyle:{width:"8vw",height:"8vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"item-title"},[t._v("总时间")]),t._v(" "),n("div",{staticClass:"item-num"},[t._v(t._s(t.status_data.totle_time))])])])])])])],1),t._v(" "),n("div",{staticClass:"left2"},[n("dv-border-box-9",[n("div",{staticStyle:{width:"66.5vw",height:"58vh",display:"flex","justify-content":"center","align-items":"center"}},[n("div",{attrs:{id:"container"}})])])],1),t._v(" "),n("div",{staticClass:"left3"},[n("div",{staticClass:"left3-left"},[n("dv-border-box-10",[n("div",{staticStyle:{display:"flex","align-items":"center",width:"56vw",height:"17vh"}},[n("div",{staticClass:"handle"},[t._v("\n\t\t\t\t\t\t\t\t\t手动\n\t\t\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"box"},[n("div",{directives:[{name:"waves",rawName:"v-waves"}],ref:"direction",staticClass:"bottom"},[n("div",{staticClass:"top",on:{touchstart:function(e){return t.direction("top")},mousedown:function(e){return t.direction("top")}}},[n("div",{staticClass:"top-content"})]),t._v(" "),n("div",{staticClass:"middle"},[n("div",{staticClass:"left",on:{touchstart:function(e){return t.direction("left")},mousedown:function(e){return t.direction("left")}}},[n("div",{staticClass:"left-content"})]),t._v(" "),n("div",{staticClass:"right",on:{touchstart:function(e){return t.direction("right")},mousedown:function(e){return t.direction("right")}}},[n("div",{staticClass:"right-content"})])]),t._v(" "),n("div",{staticClass:"bottom",on:{touchstart:function(e){return t.direction("bottom")},mousedown:function(e){return t.direction("bottom")}}},[n("div",{staticClass:"bottom-content"})])])]),t._v(" "),n("div",{staticClass:"auto"},[t._v("\n\t\t\t\t\t\t\t\t\t自动\n\t\t\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"item",class:{active:t.options.single},on:{click:function(e){return t.setOptions("single")}}},[t._v("\n\t\t\t\t\t\t\t\t\t单点\n\t\t\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"item",class:{active:t.options.double},on:{click:function(e){return t.setOptions("double")}}},[t._v("\n\t\t\t\t\t\t\t\t\t多点\n\t\t\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"item",class:{active:t.options.fixed},on:{click:function(e){return t.setOptions("fixed")}}},[t._v("\n\t\t\t\t\t\t\t\t\t定点\n\t\t\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"item",class:{active:t.options.cruise},on:{click:function(e){return t.setOptions("cruise")}}},[t._v("\n\t\t\t\t\t\t\t\t\t返航\n\t\t\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"item",class:{active:t.options.search},on:{click:function(e){return t.setOptions("search")}}},[t._v("\n\t\t\t\t\t\t\t\t\t寻点\n\t\t\t\t\t\t\t\t")])])])],1),t._v(" "),n("div",{staticClass:"left3-right"},[n("dv-border-box-10",[n("div",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{width:"8vw",height:"17vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("img",{staticStyle:{width:"6.5vh",height:"6.5vh"},attrs:{src:i("135f"),alt:""},on:{click:t.stop}}),t._v(" "),n("div",{staticClass:"title"},[t._v("暂停")])])])],1)])]),t._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"right1"},[n("dv-border-box-10",[n("div",{staticStyle:{width:"25vw",height:"21vh",display:"flex","justify-content":"center","align-items":"center"}},[n("video",{staticStyle:{width:"22vw",height:"18vh"},attrs:{id:"myPlayer",controls:"",playsInline:""}},[n("source",{attrs:{src:"https://hls01open.ys7.com/openlive/fe78747055f6492ab39474f5b38916fc.m3u8"}})])])])],1),t._v(" "),n("div",{staticClass:"right2"},[n("dv-border-box-10",[n("div",{staticClass:"title"},[t.sureMap?t._e():n("div",[t._v("点击湖中心一点确定湖泊轮廓")]),t._v(" "),t.options.search?n("div",{staticClass:"draw",on:{click:t.search}},[t._v("开始寻点")]):t._e(),t._v(" "),t.message?n("div",[t._v("距离下一个目标点距离:"+t._s(t.message.distance))]):t._e(),t._v(" "),t.message?n("div",[t._v(" 路径规划提示消息:"+t._s(t.message.path_info))]):t._e(),t._v(" "),t.message?n("div",[t._v("船执行手动控制提示消息:"+t._s(t.message.control_info))]):t._e()])])],1),t._v(" "),n("div",{staticClass:"right3"},[n("dv-border-box-10",[n("div",{staticClass:"title"},[t._v("控制")]),t._v(" "),n("div",{staticClass:"order-list"},[n("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item",on:{click:t.shuiBeng}},[n("img",{attrs:{src:i("27a9"),alt:""}}),t._v(" "),t.message?n("div",{staticClass:"tip"},[t._v("水泵:"+t._s(t.message.draw_info))]):t._e()])])])],1),t._v(" "),n("div",{staticClass:"right4"},[n("dv-border-box-10",[n("div",{staticClass:"title"}),t._v(" "),n("div",{staticStyle:{position:"absolute",left:"1vh",top:"3.5vh",display:"flex","justify-content":"center","align-items":"center","flex-wrap":"wrap"}},[n("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"item-title"},[t._v("行间隔")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.row,expression:"base_setting.row"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.row},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"row",e.target.value)}}})]),t._v(" "),n("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"item-title"},[t._v("列间隔")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.col,expression:"base_setting.col"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.col},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"col",e.target.value)}}})]),t._v(" "),n("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"item-title"},[t._v("离岸安全距离")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.secure_distance,expression:"base_setting.secure_distance"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.secure_distance},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"secure_distance",e.target.value)}}})]),t._v(" "),n("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"item-title"},[t._v("手动速度档位")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.speed_grade,expression:"base_setting.speed_grade"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.speed_grade},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"speed_grade",e.target.value)}}})]),t._v(" "),n("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"item-title"},[t._v("到达范围")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.arrive_range,expression:"base_setting.arrive_range"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.arrive_range},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"arrive_range",e.target.value)}}})]),t._v(" "),n("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"item-title"},[t._v("保存规划点")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.keep_point,expression:"base_setting.keep_point"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.keep_point},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"keep_point",e.target.value)}}})])])])],1)])])])],1)},s=[],a=(i("d263"),i("db72")),o=(i("ac6a"),i("c5f6"),i("4259")),c=i.n(o),l=(i("8d41"),"@@wavesContext");function r(t,e){function i(i){var n=Object.assign({},e.value),s=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),a=s.ele;if(a){a.style.position="relative",a.style.overflow="hidden";var o=a.getBoundingClientRect(),c=a.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":(c=document.createElement("span"),c.className="waves-ripple",c.style.height=c.style.width=Math.max(o.width,o.height)+"px",a.appendChild(c)),s.type){case"center":c.style.top=o.height/2-c.offsetHeight/2+"px",c.style.left=o.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(i.pageY-o.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(i.pageX-o.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=s.color,c.className="waves-ripple z-active",!1}}return t[l]?t[l].removeHandle=i:t[l]={removeHandle:i},i}var d={bind:function(t,e){t.addEventListener("click",r(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[l].removeHandle,!1),t.addEventListener("click",r(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[l].removeHandle,!1),t[l]=null,delete t[l]}},g=function(t){t.directive("waves",d)};window.Vue&&(window.waves=d,Vue.use(g)),d.install=g;var v=d,h=i("fe27"),_=i("c466"),m={mounted:function(){this.deviceId=this.$route.params.deviceId,this.initMqtt(),this.map||this.initMap(),this.$nextTick((function(){new EZUIPlayer("myPlayer")}))},components:{},directives:{waves:v},data:function(){return{isFirst:!0,fmt:_["a"],sureMap:!1,x:null,y:null,map:null,client:null,deviceId:null,prePoint:null,status_data:{},detect_data:{},pool_info:{},doubleList:[],doublePreX:null,doublePreY:null,currentList:[],message:null,isSwitch:null,dialogVisible:!1,base_setting:{row:"1",col:"2",speed_grade:"3",secure_distance:"4",arrive_range:"5",keep_point:"6"},height_setting:{stop_pwm:1,check_status_interval:2,check_network_interval:3,find_points_num:4,max_pwm:5,min_pwm:6,pid_interval:7,network_backhome:8,energy_backhome:9,left_motor_cw:10,right_motor_cw:11,motor_forward:12,motor_steer:13,full_speed_meter:14,kp:15,ki:16,kd:17,draw_time:18,start_sleep_time:19,motor_init_time:20},options:{single:!0,search:!1,double:!1,ring:!1,fixed:!1,cruise:!1}}},filters:{valueFilter:function(t){return t||"暂无"},switchFilter:function(t){return 1==t?"开启中":2==t?"已关闭":void 0}},computed:{Point:function(){var t=this.x,e=this.y;return[t,e]}},watch:{Point:function(t){114.431408!=t[0]&&(this.initPoint(),this.currentList.push(t),this.draw(this.currentList))}},methods:{initMqtt:function(){var t=Math.random().toFixed(3);this.client=new c.a.Client("47.97.183.24",Number(8083),t),console.log(this.client),this.client.onMessageArrived=this.onMessageArrived,this.client.onConnectionLost=this.onConnectionLost,this.client.connect({onSuccess:this.onConnect})},onConnect:function(){console.log("onConnect"),this.client.subscribe("status_data_".concat(this.deviceId)),this.client.subscribe("detect_data_".concat(this.deviceId)),this.client.subscribe("pool_info_".concat(this.deviceId)),this.client.subscribe("path_planning_".concat(this.deviceId)),this.client.subscribe("notice_info_".concat(this.deviceId)),this.client.subscribe("switch_".concat(this.deviceId)),this.client.subscribe("base_setting_".concat(this.deviceId)),this.client.subscribe("height_setting_".concat(this.deviceId)),this.client.send("base_setting_".concat(this.deviceId),JSON.stringify({info_type:1}),2)},onMessageArrived:function(t){var e=this;console.log('"topic" '.concat(t.topic)),"".concat(t.topic)=="status_data_".concat(this.deviceId)&&(this.status_data=JSON.parse(t.payloadString),this.$store.commit("ship/SET_STATUS_DATA",this.status_data),console.log(this.status_data),this.status_data&&this.status_data.current_lng_lat&&(this.x=this.status_data.current_lng_lat[0],this.y=this.status_data.current_lng_lat[1]),this.map||this.initMap(),this.status_data.home_lng_lat&&this.home(this.status_data.home_lng_lat[0],this.status_data.home_lng_lat[1])),"".concat(t.topic)=="pool_info_".concat(this.deviceId)&&(this.pool_info=JSON.parse(t.payloadString),console.log("mapId",this.pool_info.mapId),this.pool_info.mapId&&Object(h["b"])(this.pool_info.mapId).then((function(t){e.draw(JSON.parse(t.data.mapList[0].mapData)),e.sureMap=!0}))),"".concat(t.topic)=="path_planning_".concat(this.deviceId)&&(console.log(JSON.parse(t.payloadString).sampling_points),JSON.parse(t.payloadString).sampling_points.forEach((function(t){e.icon(t[0],t[1])})),this.draw(JSON.parse(t.payloadString).path_points),this.doubleList=[]),"".concat(t.topic)=="notice_info_".concat(this.deviceId)&&(this.message=JSON.parse(t.payloadString)),"".concat(t.topic)=="switch_".concat(this.deviceId)&&(this.isSwitch=JSON.parse(t.payloadString)),"".concat(t.topic)=="height_setting_".concat(this.deviceId)&&3==JSON.parse(t.payloadString).info_type&&(this.height_setting=JSON.parse(t.payloadString),console.log(this.height_setting)),"".concat(t.topic)=="base_setting_".concat(this.deviceId)&&3==JSON.parse(t.payloadString).info_type&&(this.base_setting=JSON.parse(t.payloadString),console.log(this.base_setting))},onConnectionLost:function(t){console.log(t),0!==t.errorCode&&console.log("onConnectionLost:"+t.errorMessage)},initMap:function(){this.x||this.y||(this.x=114.431408,this.y=30.523486);var t=new AMap.Map("container",{zoom:13,scrollWheel:!1,center:[this.x,this.y],mapStyle:"amap://styles/001a637581603985681831e1471630a5"});this.map=t,t.on("click",this.clickMap),AMap.plugin(["AMap.ToolBar","AMap.Scale","AMap.HawkEye","AMap.MapType"],(function(){t.addControl(new AMap.ToolBar),t.addControl(new AMap.Scale),t.addControl(new AMap.MapType)}))},stop:function(){this.client.send("control_data_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,move_direction:-1}),2)},shuiBeng:function(){0!=this.message.draw_info?1!=this.message.draw_info||this.client.send("switch_".concat(this.deviceId),JSON.stringify({b_draw:0}),2):this.client.send("switch_".concat(this.deviceId),JSON.stringify({b_draw:1}),2)},setting:function(){var t=this;this.$confirm("是否修改该设置").then((function(){console.log("sure"),t.client.send("base_setting_".concat(t.deviceId),JSON.stringify({info_type:2,row:t.base_setting.row,col:t.base_setting.col,speed_grade:t.base_setting.speed_grade,secure_distance:t.base_setting.secure_distance,arrive_range:t.base_setting.arrive_range,keep_point:t.base_setting.keep_point}),2),console.log({row:t.base_setting.row,col:t.base_setting.col,speed_grade:t.base_setting.speed_grade,secure_distance:t.base_setting.secure_distance,arrive_range:t.base_setting.arrive_range,keep_point:t.base_setting.keep_point})})).catch((function(){console.log("no")}))},reset:function(){this.client.send("height_setting_".concat(this.deviceId),JSON.stringify({info_type:4}),2),console.log({info_type:4}),this.dialogVisible=!1},settingSure:function(){this.client.send("height_setting_".concat(this.deviceId),JSON.stringify(Object(a["a"])(Object(a["a"])({},this.height_setting),{},{info_type:2})),2),console.log(Object(a["a"])(Object(a["a"])({},this.height_setting),{},{info_type:2})),this.dialogVisible=!1},search:function(){this.options.search=!1,this.client.send("start_".concat(this.deviceId),JSON.stringify({search_pattern:1}),2)},goHome:function(){this.$router.push({path:"/ship/detail/".concat(this.deviceId)})},goIndex:function(){this.$router.push({path:"/equipment/ship/list"})},setOptions:function(t){return"search"==t&&this.client.send("auto_lng_lat_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,config:{row_gap:50}}),2),"single"==t?1==this.options[t]?(this.options[t]=!1,void(this.options.double=!0)):(this.options[t]=!0,void(this.options.double=!1)):"double"==t?1==this.options[t]?(this.options[t]=!1,void(this.options.single=!0)):(this.options[t]=!0,void(this.options.single=!1)):void(1==this.options[t]?this.options[t]=!1:this.options[t]=!0)},clickMap:function(t){if(!this.sureMap)return console.log({deviceId:this.deviceId,lng_lat:[t.lnglat.lng,t.lnglat.lat],zoom:t.target.getZoom()}),void this.client.send("pool_click_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,lng_lat:[t.lnglat.lng,t.lnglat.lat],zoom:t.target.getZoom()}),2);1!=this.options.single?1!=this.options.double||this.double(t):this.single(t)},dialog:function(){this.dialogVisible=!0,this.client.send("height_setting_".concat(this.deviceId),JSON.stringify({info_type:1}),2)},initPoint:function(){this.prePoint&&this.map.remove(this.prePoint);var t=new AMap.Icon({size:new AMap.Size(40,50),image:"http://101.37.119.148:3000/ship.png",imageSize:new AMap.Size(40,50)}),e=new AMap.Marker({position:new AMap.LngLat(this.x,this.y),offset:new AMap.Pixel(-25,-25),icon:t,title:"行星轮",zoom:13});this.prePoint=e,this.map.add(e),this.isFirst&&(this.isFirst=!1,this.map.setFitView())},single:function(t){var e=this;this.$confirm("确认前往该区域？").then((function(i){var n=[new AMap.LngLat(e.x,e.y),new AMap.LngLat(t.lnglat.lng,t.lnglat.lat)],s=new AMap.Polyline({path:n}),a=new AMap.OverlayGroup([s]);a.setOptions({strokeColor:"#4081c4",strokeWeight:1}),e.map.add(a);var o=e.options.cruise,c=e.options.fixed;0==o?(console.log(o,c),o=0):(o=1,console.log(o,c)),console.log(o,c),0==c?(console.log(o,c),c=0):(c=1,console.log(o,c)),console.log(o,c),e.client.send("user_lng_lat_".concat(e.deviceId),JSON.stringify({deviceId:e.deviceId,lng_lat:[[t.lnglat.lng,t.lnglat.lat]],zoom:t.target.getZoom(),meter_pix:t.target.getResolution(),config:{back_home:o,fix_point:c}}),2),console.log("开始执行命令",{deviceId:e.deviceId,lng_lat:[[t.lnglat.lng,t.lnglat.lat]],zoom:t.target.getZoom(),meter_pix:t.target.getResolution(),config:{back_home:o,fix_point:c}})})).catch((function(t){console.log("取消")}))},double:function(t){var e=this;this.$confirm("继续选点？").then((function(i){console.log("double"),e.doublePreX||e.doublePreY||(e.doublePreX=e.x,e.doublePreY=e.y);var n=[new AMap.LngLat(e.doublePreX,e.doublePreY),new AMap.LngLat(t.lnglat.lng,t.lnglat.lat)],s=new AMap.Polyline({path:n}),a=new AMap.OverlayGroup([s]);a.setOptions({strokeColor:"#4081c4",strokeWeight:1}),e.map.add(a),e.doublePreX=t.lnglat.lng,e.doublePreY=t.lnglat.lat,e.doubleList.push([t.lnglat.lng,t.lnglat.lat])})).catch((function(i){0!=e.doubleList.length&&e.$confirm("确认前往这些区域？").then((function(i){var n=e.options.cruise,s=e.options.fixed;0==n||(n=1),s=0==s?0:1,e.client.send("user_lng_lat_".concat(e.deviceId),JSON.stringify({deviceId:e.deviceId,lng_lat:e.doubleList,zoom:t.target.getZoom(),meter_pix:t.target.getResolution(),config:{back_home:n,fix_point:s}}),2),console.log("开始",{deviceId:e.deviceId,lng_lat:e.doubleList,zoom:t.target.getZoom(),meter_pix:t.target.getResolution(),config:{back_home:n,fix_point:s}})})).catch((function(t){location.reload()}))}))},initTest:function(){var t=this;this.x=115.431408,this.y=30.523486,setInterval((function(){t.x+=.01,t.y+=.01,t.initPoint(t.x,t.y)}),2e3)},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},draw:function(t){var e=t;e.forEach((function(t){t=new AMap.LngLat(t[0],t[1])}));var i=new AMap.Polyline({path:e}),n=new AMap.OverlayGroup([i]);n.setOptions({strokeColor:"red",strokeWeight:1}),this.map.add(n)},icon:function(t,e){var i=new AMap.Icon({size:new AMap.Size(40,50),image:"http://101.37.119.148:3000/pointer.png",imageSize:new AMap.Size(40,50)}),n=new AMap.Marker({position:new AMap.LngLat(t,e),offset:new AMap.Pixel(-20,-20),icon:i,title:"采样点",zoom:13});this.map.add(n)},home:function(t,e){var i=new AMap.Icon({size:new AMap.Size(40,50),image:"http://101.37.119.148:3000/backhome.png",imageSize:new AMap.Size(40,50)}),n=new AMap.Marker({position:new AMap.LngLat(t,e),offset:new AMap.Pixel(-20,-20),icon:i,title:"home",zoom:13});this.map.add(n)},direction:function(t){"top"==t&&(this.client.send("control_data_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,move_direction:0}),2),console.log({deviceId:this.deviceId,move_direction:0})),"left"==t&&this.client.send("control_data_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,move_direction:90}),2),"bottom"==t&&this.client.send("control_data_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,move_direction:180}),2),"right"==t&&this.client.send("control_data_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,move_direction:270}),2)}}},u=m,p=(i("bbd9"),i("2877")),f=Object(p["a"])(u,n,s,!1,null,"2b394d56",null);e["default"]=f.exports},"27a9":function(t,e){t.exports="data:image/png;base64,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"},"4fe1":function(t,e,i){t.exports=i.p+"static/img/setting.9e59a335.png"},"8d41":function(t,e,i){},9776:function(t,e,i){},bbd9:function(t,e,i){"use strict";i("9776")},c466:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("6b54"),i("3b2b"),i("a481");function n(t){var e="yyyy-MM-dd hh:mm:ss",i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,t.getFullYear())),i)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==i[n].toString().length?"0"+i[n]:i[n]));return e}},fe27:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o}));var n=i("b775");function s(t,e,i,s){return Object(n["a"])({url:"/admin/xxl/data/getData",method:"get",params:{deviceId:t,mapId:e,startTime:i,endTime:s}})}function a(t){return Object(n["a"])({url:"/admin/xxl/map/list",method:"get",params:{mapId:t}})}function o(t){return Object(n["a"])({url:"/admin/xxl/map/list",method:"get",params:{deviceId:t}})}}}]);