(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-258417cc"],{"135f":function(t,e,i){t.exports=i.p+"static/img/启动.33b27e3c.png"},"1d73":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"body"},[s("el-dialog",{attrs:{title:"设置",visible:t.dialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-button",{attrs:{type:"primary"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),s("el-alert",{attrs:{title:"时间设置类别",type:"success",closable:!1}}),t._v("\n\n      pid间隔:\n\n      "),s("el-input",{attrs:{placeholder:""},model:{value:t.height_setting.pid_interval,callback:function(e){t.$set(t.height_setting,"pid_interval",e)},expression:"height_setting.pid_interval"}}),t._v("\n      检查船状态间隔:\n\n      "),s("el-input",{attrs:{placeholder:""},model:{value:t.height_setting.check_status_interval,callback:function(e){t.$set(t.height_setting,"check_status_interval",e)},expression:"height_setting.check_status_interval"}}),t._v("\n      检查网络连接状态间隔:\n\n      "),s("el-input",{attrs:{placeholder:""},model:{value:t.height_setting.check_network_interval,callback:function(e){t.$set(t.height_setting,"check_network_interval",e)},expression:"height_setting.check_network_interval"}}),t._v("\n      抽水时间:\n      "),s("el-input",{attrs:{placeholder:""},model:{value:t.height_setting.draw_time,callback:function(e){t.$set(t.height_setting,"draw_time",e)},expression:"height_setting.draw_time"}}),t._v("\n      开机前等待时间:\n\n      "),s("el-input",{attrs:{placeholder:""},model:{value:t.height_setting.start_sleep_time,callback:function(e){t.$set(t.height_setting,"start_sleep_time",e)},expression:"height_setting.start_sleep_time"}}),t._v("\n      电机初始化时间:\n      "),s("el-input",{attrs:{placeholder:""},model:{value:t.height_setting.motor_init_time,callback:function(e){t.$set(t.height_setting,"motor_init_time",e)},expression:"height_setting.motor_init_time"}}),t._v("\n      检测间隔:\n\n      "),s("el-input",{attrs:{placeholder:""},model:{value:t.height_setting.pix_interval,callback:function(e){t.$set(t.height_setting,"pix_interval",e)},expression:"height_setting.pix_interval"}}),t._v(" "),s("el-alert",{attrs:{title:"电机设置类别",type:"info",closable:!1}}),t._v("\n      电机停转:\n      "),s("el-input",{model:{value:t.height_setting.stop_pwm,callback:function(e){t.$set(t.height_setting,"stop_pwm",e)},expression:"height_setting.stop_pwm"}}),t._v("\n      电机前进分量:\n      "),s("el-input",{model:{value:t.height_setting.motor_forward,callback:function(e){t.$set(t.height_setting,"motor_forward",e)},expression:"height_setting.motor_forward"}}),t._v("\n      左电机正反桨页设置:\n      "),s("el-input",{model:{value:t.height_setting.left_motor_cw,callback:function(e){t.$set(t.height_setting,"left_motor_cw",e)},expression:"height_setting.left_motor_cw"}}),t._v("\n      右电机正反桨页设置:\n      "),s("el-input",{model:{value:t.height_setting.right_motor_cw,callback:function(e){t.$set(t.height_setting,"right_motor_cw",e)},expression:"height_setting.right_motor_cw"}}),t._v("\n      kp:\n      "),s("el-input",{model:{value:t.height_setting.kp,callback:function(e){t.$set(t.height_setting,"kp",e)},expression:"height_setting.kp"}}),t._v("\n      ki:\n      "),s("el-input",{model:{value:t.height_setting.ki,callback:function(e){t.$set(t.height_setting,"ki",e)},expression:"height_setting.ki"}}),t._v("\n      kd:\n      "),s("el-input",{model:{value:t.height_setting.kd,callback:function(e){t.$set(t.height_setting,"kd",e)},expression:"height_setting.kd"}}),t._v("\n      电机转弯分量:\n      "),s("el-input",{model:{value:t.height_setting.motor_steer,callback:function(e){t.$set(t.height_setting,"motor_steer",e)},expression:"height_setting.motor_steer"}}),t._v("\n      大于多少米全速前进:\n      "),s("el-input",{model:{value:t.height_setting.full_speed_meter,callback:function(e){t.$set(t.height_setting,"full_speed_meter",e)},expression:"height_setting.full_speed_meter"}}),t._v("\n      前进最大速度:\n      "),s("el-input",{model:{value:t.height_setting.max_pwm,callback:function(e){t.$set(t.height_setting,"max_pwm",e)},expression:"height_setting.max_pwm"}}),t._v("\n      后退最大速度:\n      "),s("el-input",{model:{value:t.height_setting.min_pwm,callback:function(e){t.$set(t.height_setting,"min_pwm",e)},expression:"height_setting.min_pwm"}}),t._v(" "),s("el-alert",{attrs:{title:"路径设置类别",type:"warning",closable:!1}}),t._v("\n      路径跟踪方式:\n      "),s("el-input",{model:{value:t.height_setting.path_track_type,callback:function(e){t.$set(t.height_setting,"path_track_type",e)},expression:"height_setting.path_track_type"}}),t._v("\n      路径规划方式:\n      "),s("el-input",{model:{value:t.height_setting.path_plan_type,callback:function(e){t.$set(t.height_setting,"path_plan_type",e)},expression:"height_setting.path_plan_type"}}),t._v("\n      调试标志:\n      "),s("el-input",{model:{value:t.height_setting.home_debug,callback:function(e){t.$set(t.height_setting,"home_debug",e)},expression:"height_setting.home_debug"}}),t._v("\n      播放声音:\n      "),s("el-input",{model:{value:t.height_setting.b_play_audio,callback:function(e){t.$set(t.height_setting,"b_play_audio",e)},expression:"height_setting.b_play_audio"}}),t._v("\n      添加避障方式设置:\n      "),s("el-input",{model:{value:t.height_setting.obstacle_avoid_type,callback:function(e){t.$set(t.height_setting,"obstacle_avoid_type",e)},expression:"height_setting.obstacle_avoid_type"}}),t._v("\n      TSP优化路径:\n      "),s("el-input",{model:{value:t.height_setting.b_tsp,callback:function(e){t.$set(t.height_setting,"b_tsp",e)},expression:"height_setting.b_tsp"}}),t._v("\n      查找数量:\n      "),s("el-input",{model:{value:t.height_setting.find_points_num,callback:function(e){t.$set(t.height_setting,"find_points_num",e)},expression:"height_setting.find_points_num"}}),t._v(" "),s("el-alert",{attrs:{title:"重要状态设置类别",type:"error",closable:!1}}),t._v("\n      断网返航:\n      "),s("el-input",{model:{value:t.height_setting.network_backhome,callback:function(e){t.$set(t.height_setting,"network_backhome",e)},expression:"height_setting.network_backhome"}}),t._v("\n      剩余电量返航:\n      "),s("el-input",{model:{value:t.height_setting.energy_backhome,callback:function(e){t.$set(t.height_setting,"energy_backhome",e)},expression:"height_setting.energy_backhome"}}),t._v("\n      断网检查:\n      "),s("el-input",{model:{value:t.height_setting.b_check_network,callback:function(e){t.$set(t.height_setting,"b_check_network",e)},expression:"height_setting.b_check_network"}}),t._v("\n      校准罗盘:\n      "),s("el-input",{model:{value:t.height_setting.calibration_compass,callback:function(e){t.$set(t.height_setting,"calibration_compass",e)},expression:"height_setting.calibration_compass"}}),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.settingSure}},[t._v("确 定")])],1)],1),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"menu1",on:{touchstart:t.goHome,click:t.goHome}},[t._v("数据总览")]),t._v(" "),s("div",{staticClass:"menu2"},[t._v("设备操作")]),t._v(" "),s("div",{staticClass:"menu3",on:{click:t.goIndex,touchstart:t.goIndex}},[t._v(" 返回")]),t._v(" "),s("img",{staticClass:"menu4",attrs:{src:i("4fe1"),alt:""},on:{click:t.dialog}}),t._v(" "),s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[s("div",{staticClass:"text",staticStyle:{"margin-top":"1vh","margin-bottom":"-1vw"}},[t._v("无人船智能云平台")]),t._v(" "),s("dv-decoration-5",{staticStyle:{width:"40vw",height:"5vh"}})],1),t._v(" "),s("div",{staticClass:"tip-item"},[s("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item1"},[s("div",{staticClass:"text"},[t._v("设备电量")]),t._v(" "),s("div",{staticClass:"num"},[t._v(t._s(t._f("valueFilter")(t.status_data.dump_energy)))])]),t._v(" "),s("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item2"},[s("div",{staticClass:"text"},[t._v("网络延时")]),t._v(" "),s("div",{staticClass:"num"},[t._v("\n\n              "+t._s(t._f("valueFilter")(t.status_data.ping))+"ms\n            ")])]),t._v(" "),s("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item3"},[s("div",{staticClass:"text"},[t._v("船头方向")]),t._v(" "),s("div",{staticClass:"num"},[t._v(t._s(t._f("valueFilter")(t.status_data.direction)))])]),t._v(" "),s("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item4"},[s("div",{staticClass:"text"},[t._v("速度")]),t._v(" "),s("div",{staticClass:"num"},[t._v(t._s(t._f("valueFilter")(t.status_data.speed)))])])]),t._v(" "),t.message&&t.message.mapId?s("div",{staticClass:"name"},[t._v("\n          当前选择位置:"+t._s(t._f("valueFilter")(t.base_setting.pool_name))+"\n          "),s("div",{staticClass:"reset",on:{click:t.rename}},[t._v("重置选择位置")])]):t._e(),t._v(" "),s("div",{staticClass:"selectBack",class:{backActive:1==t.selectBackMode},on:{click:t.selectBack}},[t._v("选择返航点")])]),t._v(" "),s("div",{staticClass:"content-middle"},[s("div",{staticClass:"left"},[s("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"left1"},[s("dv-border-box-10",[s("div",{staticClass:"title"},[t._v(t._s(t.fmt(new Date)))]),t._v(" "),s("div",{staticClass:"tip"},[s("div",{staticClass:"left"},[s("div",{staticStyle:{display:"flex"}},[s("div",{staticStyle:{width:"8vw",height:"8vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[s("div",{staticClass:"item-title"},[t._v("里程")]),t._v(" "),s("div",{staticClass:"item-num"},[t._v(t._s(t.status_data.run_distance))])]),t._v(" "),s("div",{staticStyle:{width:"8vw",height:"8vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[s("div",{staticClass:"item-title"},[t._v("总里程")]),t._v(" "),s("div",{staticClass:"item-num"},[t._v(t._s(t.status_data.totle_distance))])])])]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[s("div",{staticStyle:{width:"8vw",height:"8vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[s("div",{staticClass:"item-title"},[t._v("时间")]),t._v(" "),s("div",{staticClass:"item-num"},[t._v(" "+t._s(t.status_data.runtime))])]),t._v(" "),s("div",{staticStyle:{width:"8vw",height:"8vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[s("div",{staticClass:"item-title"},[t._v("总时间")]),t._v(" "),s("div",{staticClass:"item-num"},[t._v(t._s(t.status_data.totle_time))])])])])])])],1),t._v(" "),s("div",{staticClass:"left2"},[s("dv-border-box-9",[s("div",{staticStyle:{width:"66.5vw",height:"58vh",display:"flex","justify-content":"center","align-items":"center"}},[s("div",{attrs:{id:"container"}})])])],1),t._v(" "),s("div",{staticClass:"left3"},[s("div",{staticClass:"left3-left"},[s("dv-border-box-10",[s("div",{staticStyle:{display:"flex","align-items":"center",width:"56vw",height:"17vh"}},[s("div",{staticClass:"handle"},[t._v("\n                    手动\n                  ")]),t._v(" "),s("div",{staticClass:"box"},[s("div",{directives:[{name:"waves",rawName:"v-waves"}],ref:"direction",staticClass:"bottom"},[s("div",{staticClass:"top",on:{touchstart:function(e){return t.direction("top")},mousedown:function(e){return t.direction("top")}}},[s("div",{staticClass:"top-content"})]),t._v(" "),s("div",{staticClass:"middle"},[s("div",{staticClass:"left",on:{touchstart:function(e){return t.direction("left")},mousedown:function(e){return t.direction("left")}}},[s("div",{staticClass:"left-content"})]),t._v(" "),s("div",{staticClass:"right",on:{touchstart:function(e){return t.direction("right")},mousedown:function(e){return t.direction("right")}}},[s("div",{staticClass:"right-content"})])]),t._v(" "),s("div",{staticClass:"bottom",on:{touchstart:function(e){return t.direction("bottom")},mousedown:function(e){return t.direction("bottom")}}},[s("div",{staticClass:"bottom-content"})])])]),t._v(" "),s("div",{staticClass:"auto"},[t._v("\n                    自动\n                  ")]),t._v(" "),s("div",{staticClass:"item",class:{active:t.options.single},on:{click:function(e){return t.setOptions("single")}}},[t._v("\n                    单点\n                  ")]),t._v(" "),s("div",{staticClass:"item",class:{active:t.options.double},on:{click:function(e){return t.setOptions("double")}}},[t._v("\n                    多点\n                  ")]),t._v(" "),s("div",{staticClass:"item",class:{active:t.options.fixed},on:{click:function(e){return t.setOptions("fixed")}}},[t._v("\n                    定点\n                  ")]),t._v(" "),s("div",{staticClass:"item",class:{active:t.options.cruise},on:{click:function(e){return t.setOptions("cruise")}}},[t._v("\n                    返航\n                  ")]),t._v(" "),s("div",{staticClass:"item",class:{active:t.options.search},on:{click:function(e){return t.setOptions("search")}}},[t._v("\n                    寻点\n                  ")])])])],1),t._v(" "),s("div",{staticClass:"left3-right"},[s("dv-border-box-10",[s("div",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{width:"8vw",height:"17vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[s("img",{staticStyle:{width:"6.5vh",height:"6.5vh"},attrs:{src:i("135f"),alt:""},on:{click:t.stop}}),t._v(" "),s("div",{staticClass:"title"},[t._v("暂停")])])])],1)])]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"right1"},[s("dv-border-box-10",[s("div",{staticStyle:{width:"25vw",height:"21vh",display:"flex","justify-content":"center","align-items":"center"}},[s("video",{staticStyle:{width:"22vw",height:"18vh"},attrs:{id:"myPlayer",controls:"",playsInline:""}},[s("source",{attrs:{src:"https://hls01open.ys7.com/openlive/fe78747055f6492ab39474f5b38916fc.m3u8"}})])])])],1),t._v(" "),s("div",{staticClass:"right2"},[s("dv-border-box-10",[s("div",{staticClass:"title"},[t.sureMap?t._e():s("div",[t._v("点击湖中心一点确定湖泊轮廓")]),t._v(" "),t.options.search?s("div",{staticClass:"draw",on:{click:t.search}},[t._v("开始寻点")]):t._e(),t._v(" "),t.message?s("div",[t._v("距离下一个目标点距离:"+t._s(t.message.distance))]):t._e(),t._v(" "),t.message?s("div",[t._v(" 路径规划提示消息:"+t._s(t.message.path_info))]):t._e(),t._v(" "),t.message?s("div",[t._v("船执行手动控制提示消息:"+t._s(t.message.control_info))]):t._e(),t._v(" "),t.message?s("div",[t._v("低电量状态:"+t._s(t.message.low_dump_energy_warnning))]):t._e(),t._v(" "),t.message?s("div",[t._v("当前偏差角度:"+t._s(t.message.theta_error))]):t._e(),t._v(" "),t.message?s("div",[t._v("超声波距离 左侧 右侧:"+t._s(t.message.ultrasonic_distance))]):t._e(),t._v(" "),t.message?s("div",[t._v("遥控器是否启用:"+t._s(t.message.b_start_remote))]):t._e(),t._v(" "),t.message?s("div",[t._v(" 罗盘提示消息:"+t._s(t.message.compass_notice_info))]):t._e(),t._v(" "),t.status_data.lng_lat_error?s("div",[t._v(t._s(t.status_data.lng_lat_error)+"m\n                ")]):t._e()])])],1),t._v(" "),s("div",{staticClass:"right3"},[s("dv-border-box-10",[s("div",{staticClass:"title"},[t._v("控制")]),t._v(" "),s("div",{staticClass:"order-list"},[s("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item",on:{click:t.shuiBeng}},[s("img",{attrs:{src:i("27a9"),alt:""}}),t._v(" "),t.message?s("div",{staticClass:"tip"},[t._v("水泵:"+t._s(t.message.draw_info))]):t._e()]),t._v(" "),s("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item",on:{click:t.shuiBeng}},[s("img",{attrs:{src:i("27a9"),alt:""}}),t._v(" "),t.message?s("div",{staticClass:"tip"},[t._v("水泵:"+t._s(t.message.draw_info))]):t._e()]),t._v(" "),s("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item",on:{click:t.shuiBeng}},[s("img",{attrs:{src:i("27a9"),alt:""}}),t._v(" "),t.message?s("div",{staticClass:"tip"},[t._v("水泵:"+t._s(t.message.draw_info))]):t._e()]),t._v(" "),s("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"item",on:{click:t.shuiBeng}},[s("img",{attrs:{src:i("27a9"),alt:""}}),t._v(" "),t.message?s("div",{staticClass:"tip"},[t._v("水泵:"+t._s(t.message.draw_info))]):t._e()])])])],1),t._v(" "),s("div",{staticClass:"right4"},[s("dv-border-box-10",[s("div",{staticClass:"title"}),t._v(" "),s("div",{staticStyle:{position:"absolute",left:"1vh",top:"3.5vh",display:"flex","justify-content":"center","align-items":"center","flex-wrap":"wrap"}},[s("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[s("div",{staticClass:"item-title"},[t._v("行间隔")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.row,expression:"base_setting.row"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.row},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"row",e.target.value)}}})]),t._v(" "),s("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[s("div",{staticClass:"item-title"},[t._v("列间隔")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.col,expression:"base_setting.col"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.col},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"col",e.target.value)}}})]),t._v(" "),s("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[s("div",{staticClass:"item-title"},[t._v("离岸安全距离")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.secure_distance,expression:"base_setting.secure_distance"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.secure_distance},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"secure_distance",e.target.value)}}})]),t._v(" "),s("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[s("div",{staticClass:"item-title"},[t._v("手动速度档位")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.speed_grade,expression:"base_setting.speed_grade"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.speed_grade},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"speed_grade",e.target.value)}}})]),t._v(" "),s("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[s("div",{staticClass:"item-title"},[t._v("到达范围")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.arrive_range,expression:"base_setting.arrive_range"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.arrive_range},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"arrive_range",e.target.value)}}})]),t._v(" "),s("div",{staticStyle:{width:"8vw",height:"6vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[s("div",{staticClass:"item-title"},[t._v("保存规划点")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.base_setting.keep_point,expression:"base_setting.keep_point"}],staticClass:"item-num",attrs:{type:"text"},domProps:{value:t.base_setting.keep_point},on:{change:t.setting,input:function(e){e.target.composing||t.$set(t.base_setting,"keep_point",e.target.value)}}})])])])],1)])])])],1)},n=[],a=(i("d263"),i("db72")),o=(i("ac6a"),i("c5f6"),i("4259")),c=i.n(o),l=(i("8d41"),"@@wavesContext");function r(t,e){function i(i){var s=Object.assign({},e.value),n=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},s),a=n.ele;if(a){a.style.position="relative",a.style.overflow="hidden";var o=a.getBoundingClientRect(),c=a.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":(c=document.createElement("span"),c.className="waves-ripple",c.style.height=c.style.width=Math.max(o.width,o.height)+"px",a.appendChild(c)),n.type){case"center":c.style.top=o.height/2-c.offsetHeight/2+"px",c.style.left=o.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(i.pageY-o.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(i.pageX-o.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=n.color,c.className="waves-ripple z-active",!1}}return t[l]?t[l].removeHandle=i:t[l]={removeHandle:i},i}var d={bind:function(t,e){t.addEventListener("click",r(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[l].removeHandle,!1),t.addEventListener("click",r(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[l].removeHandle,!1),t[l]=null,delete t[l]}},_=function(t){t.directive("waves",d)};window.Vue&&(window.waves=d,Vue.use(_)),d.install=_;var h=d,g=i("fe27"),v=i("c466"),p={components:{},directives:{waves:h},filters:{valueFilter:function(t){return t||"暂无"},switchFilter:function(t){return 1==t?"开启中":2==t?"已关闭":void 0}},data:function(){return{selectBackMode:!1,isFirst:!0,fmt:v["a"],sureMap:!1,x:null,y:null,map:null,client:null,deviceId:null,prePoint:null,status_data:{},detect_data:{},pool_info:{},doubleList:[],doublePreX:null,doublePreY:null,currentList:[],message:null,isSwitch:null,dialogVisible:!1,base_setting:{row:"1",col:"2",speed_grade:"3",secure_distance:"4",arrive_range:"5",keep_point:"6",pool_name:""},height_setting:{stop_pwm:1,check_status_interval:2,check_network_interval:3,find_points_num:4,max_pwm:5,min_pwm:6,pid_interval:7,network_backhome:8,energy_backhome:9,left_motor_cw:10,right_motor_cw:11,motor_forward:12,motor_steer:13,full_speed_meter:14,kp:15,ki:16,kd:17,draw_time:18,start_sleep_time:19,motor_init_time:20,b_check_network:21,b_tsp:22,home_debug:23,b_play_audio:24,obstacle_avoid_type:25,path_plan_type:26,path_track_type:27,calibration_compass:28},options:{single:!0,search:!1,double:!1,ring:!1,fixed:!1,cruise:!1}}},computed:{Point:function(){var t=this.x,e=this.y;return[t,e]}},watch:{Point:function(t){114.431408!=t[0]&&(this.initPoint(),this.currentList.push(t),this.draw(this.currentList))}},mounted:function(){this.deviceId=this.$route.params.deviceId,this.initMqtt(),this.map||this.initMap(),this.$nextTick((function(){new EZUIPlayer("myPlayer")}))},methods:{initMqtt:function(){var t=Math.random().toFixed(3);this.client=new c.a.Client("47.97.183.24",Number(8083),t),console.log(this.client),this.client.onMessageArrived=this.onMessageArrived,this.client.onConnectionLost=this.onConnectionLost,this.client.connect({onSuccess:this.onConnect})},onConnect:function(){console.log("onConnect"),this.client.subscribe("status_data_".concat(this.deviceId)),this.client.subscribe("detect_data_".concat(this.deviceId)),this.client.subscribe("pool_info_".concat(this.deviceId)),this.client.subscribe("path_planning_".concat(this.deviceId)),this.client.subscribe("notice_info_".concat(this.deviceId)),this.client.subscribe("switch_".concat(this.deviceId)),this.client.subscribe("base_setting_".concat(this.deviceId)),this.client.subscribe("height_setting_".concat(this.deviceId)),this.client.subscribe("refresh_".concat(this.deviceId)),this.client.send("refresh_".concat(this.deviceId),JSON.stringify({info_type:1}),2),this.client.send("base_setting_".concat(this.deviceId),JSON.stringify({info_type:1}),2)},onMessageArrived:function(t){var e=this;console.log('"topic" '.concat(t.topic)),"".concat(t.topic)=="status_data_".concat(this.deviceId)&&(this.status_data=JSON.parse(t.payloadString),this.$store.commit("ship/SET_STATUS_DATA",this.status_data),this.status_data&&this.status_data.current_lng_lat&&(this.x=this.status_data.current_lng_lat[0],this.y=this.status_data.current_lng_lat[1]),this.map||this.initMap(),this.status_data.home_lng_lat&&this.home(this.status_data.home_lng_lat[0],this.status_data.home_lng_lat[1])),"".concat(t.topic)=="pool_info_".concat(this.deviceId)&&(this.pool_info=JSON.parse(t.payloadString),this.pool_info.mapId&&Object(g["b"])(this.pool_info.mapId).then((function(t){e.draw(JSON.parse(t.data.mapList[0].mapData)),e.sureMap=!0}))),"".concat(t.topic)=="path_planning_".concat(this.deviceId)&&(JSON.parse(t.payloadString).sampling_points.forEach((function(t){e.icon(t[0],t[1])})),this.draw(JSON.parse(t.payloadString).path_points),this.doubleList=[]),"".concat(t.topic)=="notice_info_".concat(this.deviceId)&&(this.message=JSON.parse(t.payloadString)),"".concat(t.topic)=="switch_".concat(this.deviceId)&&(this.isSwitch=JSON.parse(t.payloadString)),"".concat(t.topic)=="height_setting_".concat(this.deviceId)&&3==JSON.parse(t.payloadString).info_type&&(this.height_setting=JSON.parse(t.payloadString)),"".concat(t.topic)=="base_setting_".concat(this.deviceId)&&3==JSON.parse(t.payloadString).info_type&&(this.base_setting=JSON.parse(t.payloadString)),"".concat(t.topic)=="refresh_".concat(this.deviceId)&&2==JSON.parse(t.payloadString).info_type&&(JSON.parse(t.payloadString).mapId&&Object(g["b"])(JSON.parse(t.payloadString).mapId).then((function(t){e.draw(JSON.parse(t.data.mapList[0].mapData)),e.sureMap=!0})),JSON.parse(t.payloadString).sampling_points&&JSON.parse(t.payloadString).sampling_points.forEach((function(t){e.icon(t[0],t[1])})),JSON.parse(t.payloadString).path_points&&(this.draw(JSON.parse(t.payloadString).path_points),this.doubleList=[]))},onConnectionLost:function(t){console.log(t),0!==t.errorCode&&console.log("onConnectionLost:"+t.errorMessage)},initMap:function(){this.x||this.y||(this.x=114.431408,this.y=30.523486);var t=new AMap.Map("container",{zoom:13,scrollWheel:!1,center:[this.x,this.y],mapStyle:"amap://styles/001a637581603985681831e1471630a5"});this.map=t,t.on("click",this.clickMap),AMap.plugin(["AMap.ToolBar","AMap.Scale","AMap.HawkEye","AMap.MapType"],(function(){t.addControl(new AMap.ToolBar),t.addControl(new AMap.Scale),t.addControl(new AMap.MapType)}))},stop:function(){this.client.send("control_data_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,move_direction:-1}),2)},shuiBeng:function(){0!=this.message.draw_info?1!=this.message.draw_info||this.client.send("switch_".concat(this.deviceId),JSON.stringify({b_draw:0}),2):this.client.send("switch_".concat(this.deviceId),JSON.stringify({b_draw:1}),2)},selectBack:function(){this.selectBackMode=!this.selectBackMode},rename:function(){this.client.send("reset_pool_".concat(this.deviceId),JSON.stringify({reset_pool:1}),2),this.sureMap=!1,setTimeout((function(){location.reload()}),1e3)},setting:function(){var t=this;this.$confirm("是否修改该设置").then((function(){console.log("sure"),t.client.send("base_setting_".concat(t.deviceId),JSON.stringify({info_type:2,row:t.base_setting.row,col:t.base_setting.col,speed_grade:t.base_setting.speed_grade,secure_distance:t.base_setting.secure_distance,arrive_range:t.base_setting.arrive_range,keep_point:t.base_setting.keep_point}),2),console.log({row:t.base_setting.row,col:t.base_setting.col,speed_grade:t.base_setting.speed_grade,secure_distance:t.base_setting.secure_distance,arrive_range:t.base_setting.arrive_range,keep_point:t.base_setting.keep_point})})).catch((function(){console.log("no")}))},reset:function(){this.client.send("height_setting_".concat(this.deviceId),JSON.stringify({info_type:4}),2),console.log({info_type:4}),this.dialogVisible=!1},settingSure:function(){this.client.send("height_setting_".concat(this.deviceId),JSON.stringify(Object(a["a"])(Object(a["a"])({},this.height_setting),{},{info_type:2})),2),console.log(Object(a["a"])(Object(a["a"])({},this.height_setting),{},{info_type:2})),this.dialogVisible=!1},search:function(){this.options.search=!1,this.client.send("start_".concat(this.deviceId),JSON.stringify({search_pattern:1}),2)},goHome:function(){this.$router.push({path:"/ship/detail/".concat(this.deviceId)})},goIndex:function(){this.$router.push({path:"/equipment/ship/list"})},setOptions:function(t){return"search"==t&&this.client.send("auto_lng_lat_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,config:{row_gap:50}}),2),"single"==t?(this.options.search=!1,1==this.options[t]?(this.options[t]=!1,void(this.options.double=!0)):(this.options[t]=!0,void(this.options.double=!1))):"double"==t?(this.options.search=!1,1==this.options[t]?(this.options[t]=!1,void(this.options.single=!0)):(this.options[t]=!0,void(this.options.single=!1))):void(1==this.options[t]?this.options[t]=!1:this.options[t]=!0)},clickMap:function(t){if(!this.sureMap)return console.log({deviceId:this.deviceId,lng_lat:[t.lnglat.lng,t.lnglat.lat],zoom:t.target.getZoom()}),void this.client.send("pool_click_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,lng_lat:[t.lnglat.lng,t.lnglat.lat],zoom:t.target.getZoom()}),2);console.log(this.selectBackMode),1!=this.selectBackMode?1!=this.options.single?1!=this.options.double||this.double(t):this.single(t):this.backPoint(t)},dialog:function(){this.dialogVisible=!0,this.client.send("height_setting_".concat(this.deviceId),JSON.stringify({info_type:1}),2)},initPoint:function(){this.prePoint&&this.map.remove(this.prePoint);var t=new AMap.Icon({size:new AMap.Size(40,50),image:"https://www.xxlun.com/website/file/ship.png",imageSize:new AMap.Size(40,50)}),e=new AMap.Marker({position:new AMap.LngLat(this.x,this.y),offset:new AMap.Pixel(-25,-25),icon:t,title:"行星轮",zoom:13});this.prePoint=e,this.map.add(e),this.isFirst&&(this.isFirst=!1,this.map.setFitView())},backPoint:function(t){var e=this;this.$confirm("确认选择该点为返航点？").then((function(i){e.client.send("set_home_".concat(e.deviceId),JSON.stringify({lng_lat:[[t.lnglat.lng,t.lnglat.lat]]}),2),e.selectBackMode=!1})).catch((function(t){}))},single:function(t){var e=this;this.$confirm("确认前往该区域？").then((function(i){var s=[new AMap.LngLat(e.x,e.y),new AMap.LngLat(t.lnglat.lng,t.lnglat.lat)],n=new AMap.Polyline({path:s}),a=new AMap.OverlayGroup([n]);a.setOptions({strokeColor:"#4081c4",strokeWeight:1}),e.map.add(a);var o=e.options.cruise,c=e.options.fixed;0==o?(console.log(o,c),o=0):(o=1,console.log(o,c)),console.log(o,c),0==c?(console.log(o,c),c=0):(c=1,console.log(o,c)),console.log(o,c),e.client.send("user_lng_lat_".concat(e.deviceId),JSON.stringify({deviceId:e.deviceId,lng_lat:[[t.lnglat.lng,t.lnglat.lat]],zoom:t.target.getZoom(),meter_pix:t.target.getResolution(),config:{back_home:o,fix_point:c}}),2),console.log("开始执行命令",{deviceId:e.deviceId,lng_lat:[[t.lnglat.lng,t.lnglat.lat]],zoom:t.target.getZoom(),meter_pix:t.target.getResolution(),config:{back_home:o,fix_point:c}})})).catch((function(t){console.log("取消")}))},double:function(t){var e=this;this.$confirm("继续选点？").then((function(i){console.log("double"),e.doublePreX||e.doublePreY||(e.doublePreX=e.x,e.doublePreY=e.y);var s=[new AMap.LngLat(e.doublePreX,e.doublePreY),new AMap.LngLat(t.lnglat.lng,t.lnglat.lat)],n=new AMap.Polyline({path:s}),a=new AMap.OverlayGroup([n]);a.setOptions({strokeColor:"#4081c4",strokeWeight:1}),e.map.add(a),e.doublePreX=t.lnglat.lng,e.doublePreY=t.lnglat.lat,e.doubleList.push([t.lnglat.lng,t.lnglat.lat])})).catch((function(i){0!=e.doubleList.length&&e.$confirm("确认前往这些区域？").then((function(i){var s=e.options.cruise,n=e.options.fixed;0==s||(s=1),n=0==n?0:1,e.client.send("user_lng_lat_".concat(e.deviceId),JSON.stringify({deviceId:e.deviceId,lng_lat:e.doubleList,zoom:t.target.getZoom(),meter_pix:t.target.getResolution(),config:{back_home:s,fix_point:n}}),2),console.log("开始",{deviceId:e.deviceId,lng_lat:e.doubleList,zoom:t.target.getZoom(),meter_pix:t.target.getResolution(),config:{back_home:s,fix_point:n}})})).catch((function(t){location.reload()}))}))},initTest:function(){var t=this;this.x=115.431408,this.y=30.523486,setInterval((function(){t.x+=.01,t.y+=.01,t.initPoint(t.x,t.y)}),2e3)},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},draw:function(t){var e=t;e.forEach((function(t){t=new AMap.LngLat(t[0],t[1])}));var i=new AMap.Polyline({path:e}),s=new AMap.OverlayGroup([i]);s.setOptions({strokeColor:"red",strokeWeight:1}),this.map.add(s)},icon:function(t,e){var i=new AMap.Icon({size:new AMap.Size(40,50),image:"https://www.xxlun.com/website/file/pointer.png",imageSize:new AMap.Size(40,50)}),s=new AMap.Marker({position:new AMap.LngLat(t,e),offset:new AMap.Pixel(-20,-20),icon:i,title:"采样点",zoom:13});this.map.add(s)},home:function(t,e){var i=new AMap.Icon({size:new AMap.Size(40,50),image:"https://www.xxlun.com/website/file/home.png",imageSize:new AMap.Size(40,50)}),s=new AMap.Marker({position:new AMap.LngLat(t,e),offset:new AMap.Pixel(-20,-20),icon:i,title:"home",zoom:13});this.map.add(s)},direction:function(t){"top"==t&&(this.client.send("control_data_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,move_direction:0}),2),console.log({deviceId:this.deviceId,move_direction:0})),"left"==t&&this.client.send("control_data_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,move_direction:90}),2),"bottom"==t&&this.client.send("control_data_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,move_direction:180}),2),"right"==t&&this.client.send("control_data_".concat(this.deviceId),JSON.stringify({deviceId:this.deviceId,move_direction:270}),2)}}},u=p,m=(i("538b"),i("2877")),f=Object(m["a"])(u,s,n,!1,null,"395b2469",null);e["default"]=f.exports},"27a9":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAoCAYAAACFFRgXAAAHXklEQVRYw8WYSYxcVxmFv3Pfq6quHuy2sd124jiOE4LiKJaCwhSJIQIJNiydHduwRmLDCrNEbCKWWSGxw9sghISUSMQBIcIm8RDZmTzKcdo9uWt67/6HxauOB7qT7o5xfumpSlX3vXvq1LnnH8QdccJOu//OV4bmmdTimExRm7Nh3mkX3PhgkThUUMYU6c77pit84xZx4ADVz59T9ekXtn7/F9rDde5Zi7RKrLbJ7CO6CzwGfLtIHDDcCHg7Mud/9V0trK0v77r7DOVSxY52hwMyRwwFBUspuNrrk+c6lLlkR5hJAGUilXi1ILp76C/eZOnEa7554gUNAE68Snd1mn1Fm1ky7QicSgwQNQLwJKOdsMI8/Sqxr0w8avOYYJbMJyQuA+sDnrhKN01xEPOszfMWUkBd0293WLCYk3myMHMkIFFjgkSl4JM8yfmJzNsnXvMHUyOcJ3kiFXxLwVNKzKSCwARAapEMTrAygvepuZzE4WyexxwFPlaiVwTngavrAh6UqJPZncQjhkOYbPFQWXDEwjJfRRwLeLjhiVoQwMhmPolzKtk/Yc7WJZUSTzn4gcUxzAwmxuuxSQJnWAFOq+SMzR6bI4hHgKkk5kb3YLxbEm3auWaSgglBCwibwmIWmDV8TeawYVZrMgUDYZjD7JU4JPi6xMCwHzhq88jaXgareVWDm72CCjMI6CrRtccnAERxt/bL377hmXZF0ct0imB/tJgmUEAFDNSwJ0QXmIzbG6+FgAKYFBwMs1fwpGGIaQO77iFG97xvAVOCKSAZaosg6BlE8JXfnfK+OqimWuSySjw1ajNNZjcFOwRzIZJFVvMrs0WlYIgYIrLNRrEGvDtmXWJ9d7gDscfPrGwKmbCoaa6dLnlmaGZlbi0P6ZcZfijYr5KHshkgbiFCporbD6xI9Bz0bSrx2eHbrGM+d3EAQ2Ag0XIDfoSoJfYavi+oouBWEsul4TnDYcxBwRXMOUMGshqapBgLbrz/54LYSghjSML5tl4qiwqzA3EY2IEY2SyVwIJhGmgjlm2yRGGTDKE0Bi2SgyTdX8ACkVD22JfHH9tIpjKsCGpMtlkphzWvFm12RbBfYtIwk8w+oCPR9xisGrco1ByM+wdYyKZQI6GEkaEjaIWYF/wnxALQd2JY9jOvl0u0W5PMIh4l8ZzhGaAVZiBBhrKArmESmLifiqDx4yk3LoSDAmgDHcRNmzdyzVm16JcjcvnyC1oEOG7PP/4PwnAkidHYCGWQhcKQbnvuuh71BSKPlSYLjZkugX4lLk3v4d3Tp8lPH8ef+uNJKf/ylJcllkOMZFokJm1aSaxGweUIOqn5C+fGTHcwbdQ4wgYaXcdEGAE9QQ/oIy6EuWjYnaCwEGIiBAr6J57WCODkvZluucdwaoqFoik2ehhCDMNcs5kHPgy4SOIQwd4k5mwOAjNbYHOE+RjxPuKSzTziAwXXEUctVsbZcGjoA/XGqXkXlfpcq0vOGOYStCK4kIILI7g4Ycpo8R7mYWBfwDFEV5sHnA3LiPMk3oiaM6kh4nquGSiRi5IjNkOJS8AFB70NAS+8z7A4wMWi4pQ6LDloJ3FhBOerm9xYnSa64lpZc66cYmedGQqeAg5vUg7ZYkHwbmROFcHbnqG/uMhg5iCOyxSIFgVvEdxwcDbV3NwQ8MkXlbEXX3qLd1TzcQFlu8Xi6goLf/hpU+MCA2DhF2963nCUxvo2G4HpKXEjmY9e/p6u3fnlz/7qS7tKeohOmNWlHkuDJQYbS6IxRr8CSy/92719XXT6NPnki8r3LlsKyk6iNfbmTbuFBCE8Kpsy887444+1evxPHgCcPE4g/Q8V5UYPfuXOVmf9mMmJ6WTK2CxYI5uSRFuZznpr1iPnrpZqe2ZvpZJkkWqhoKnKN3O5MVyFtmfh5Rdy+63XDYxTr2Kbe24bcH9ceXsr+r0Pld6DZVi3UecvA3CsMaxNHzpM0yorf4kMe3NJA49PudfakQet4XIbmhy3XV+OJLa76VYSzX3XcKyzuTZ57wMFPKpIRYcUmz9zoKbtNyTS9kjeXqb7DYqEqqaY30qmSxmKgGK7mW57gH+NK1NZRCRaWwBcBLSySGvTywcDWLInWI2aW2EGuRnqbeaqwtwKseqi6RsfmIb/9iorP/oJ5yX+pcCf2dcJuTmdq06cI/POSFx/oICPH0XzmRsO3kwl1zETrOnSd9uzgqSELVZdc5ngvTzLcLuWuOk4etrtAyvsKgr2VmaOmjlK9gBTEu07nue7q1GShBlLArOIuI64TMnl159tRg33neGH+nSHBU8U4jvAN12wf/yzB02RMAaa1snJTdFTSqRx+fGJzT9jwJ+xl9brLr4w4OVMOZHYGeZxmW+4GV4HZhmo0Dgf+J5/Ln2aX7qYrk1huIK4nhJT/zcNy1SVWSzhqsWHNANDSdwy1MSGDDcjcdGR6ViEzUcSV9pBb7PsbhlwXVLPmOWqAXxezVCkxAyBmtQAvhdvNCNVSbQNLYkh5pKCK9l3zx0+L/4LrD7Wa8/j+VkAAAAASUVORK5CYII="},"386b":function(t,e,i){var s=i("5ca1"),n=i("79e5"),a=i("be13"),o=/"/g,c=function(t,e,i,s){var n=String(a(t)),c="<"+e;return""!==i&&(c+=" "+i+'="'+String(s).replace(o,"&quot;")+'"'),c+">"+n+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(c),s(s.P+s.F*n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",i)}},"4fe1":function(t,e,i){t.exports=i.p+"static/img/setting.9e59a335.png"},"538b":function(t,e,i){"use strict";i("a8fd")},"8d41":function(t,e,i){},a8fd:function(t,e,i){},c466:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("6b54"),i("3b2b"),i("a481");function s(t){var e="yyyy-MM-dd hh:mm:ss",i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var s in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,t.getFullYear())),i)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1==i[s].toString().length?"0"+i[s]:i[s]));return e}},d263:function(t,e,i){"use strict";i("386b")("fixed",(function(t){return function(){return t(this,"tt","","")}}))},fe27:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"d",(function(){return c}));var s=i("b775");function n(t,e,i,n){return Object(s["a"])({url:"/admin/xxl/data/getData",method:"get",params:{deviceId:t,mapId:e,startTime:i,endTime:n}})}function a(t){return Object(s["a"])({url:"/admin/xxl/map/list",method:"get",params:{mapId:t}})}function o(t){return Object(s["a"])({url:"/admin/xxl/map/list",method:"get",params:{deviceId:t}})}function c(t,e){return Object(s["a"])({url:"/admin/xxl/map/updata",method:"post",params:{mapId:t,name:e}})}}}]);