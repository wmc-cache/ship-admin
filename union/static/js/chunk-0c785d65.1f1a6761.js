(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c785d65"],{"18bb":function(t,i,s){"use strict";s.r(i);var a=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"body"},[s("div",{staticClass:"content"},[s("div",{staticClass:"menu1"},[t._v("数据总览")]),t._v(" "),s("div",{staticClass:"menu2",on:{click:t.goOperation,touchstart:t.goOperation}},[t._v("设备操作")]),t._v(" "),s("div",{staticClass:"menu3",on:{click:t.goIndex,touchstart:t.goIndex}},[t._v("返回")]),t._v(" "),s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[s("div",{staticClass:"text",staticStyle:{"margin-top":"1vh","margin-bottom":"-1vw"}},[t._v("无人船智能云平台")]),t._v(" "),s("dv-decoration-5",{staticStyle:{width:"40vw",height:"5vh"}})],1),t._v(" "),s("div",{staticClass:"tip-item"},[s("div",{staticClass:"item1"},[s("div",{staticClass:"text"},[t._v("速度")]),t._v(" "),t.status_data?s("div",{staticClass:"num"},[t._v(t._s(t.status_data.speed))]):t._e()]),t._v(" "),s("div",{staticClass:"item2"},[s("div",{staticClass:"text"},[t._v("设备电量")]),t._v(" "),s("div",{staticClass:"num"},[t._v(t._s(t.status_data.dump_energy))])]),t._v(" "),s("div",{staticClass:"item3"},[s("div",{staticClass:"text"},[t._v("船头方向")]),t._v(" "),s("div",{staticClass:"num"},[t._v(t._s(t.status_data.direction))])])])]),t._v(" "),s("div",{staticClass:"content-middle"},[s("div",{staticClass:"content-left"},[s("div",{staticClass:"left1"},[s("dv-border-box-10",[s("div",{staticClass:"title"},[t._v("气象数据")]),t._v(" "),s("div",{staticClass:"time"},[t._v("2002年1月7日    星期四    10:22:34")]),t._v(" "),s("div",{staticClass:"data-list"},[s("div",{staticClass:"data-item"},[s("div",{staticClass:"item-state"},[t._v("风速")]),t._v(" "),s("div",{staticClass:"item-num"},[t._v("2级")])]),t._v(" "),s("div",{staticClass:"data-item"},[s("div",{staticClass:"item-state"},[t._v("风向")]),t._v(" "),s("div",{staticClass:"item-num"},[t._v("2级")])]),t._v(" "),s("div",{staticClass:"data-item"},[s("div",{staticClass:"item-state"},[t._v("雨量")]),t._v(" "),s("div",{staticClass:"item-num"},[t._v("2级")])]),t._v(" "),s("div",{staticClass:"data-item"},[s("div",{staticClass:"item-state"},[t._v("气温")]),t._v(" "),s("div",{staticClass:"item-num"},[t._v("2级")])]),t._v(" "),s("div",{staticClass:"data-item"},[s("div",{staticClass:"item-state"},[t._v("光照")]),t._v(" "),s("div",{staticClass:"item-num"},[t._v("2级")])]),t._v(" "),s("div",{staticClass:"data-item"},[s("div",{staticClass:"item-state"},[t._v("PM2.5")]),t._v(" "),s("div",{staticClass:"item-num"},[t._v("2级")])])])])],1),t._v(" "),s("div",{staticClass:"left2"},[s("dv-border-box-10",[s("div",{staticClass:"title"},[t._v("状态数据")]),t._v(" "),s("div",{staticClass:"icon-list"},[s("div",{staticClass:"icon-item"},[s("div",{staticClass:"text"},[t._v("船头方向")]),t._v(" "),s("div",{staticClass:"num"},[t._v(t._s(t.status_data.direction||"暂无"))])]),t._v(" "),s("div",{staticClass:"icon-item"},[s("div",{staticClass:"text"},[t._v("设备电量")]),t._v(" "),s("div",{staticClass:"num"},[t._v(t._s(t.status_data.dump_energy||"暂无"))])]),t._v(" "),s("div",{staticClass:"icon-item"},[s("div",{staticClass:"text"},[t._v("液位")]),t._v(" "),s("div",{staticClass:"num"},[t._v("暂无")])]),t._v(" "),s("div",{staticClass:"icon-item"},[s("div",{staticClass:"text"},[t._v("液位")]),t._v(" "),s("div",{staticClass:"num"},[t._v("暂无")])]),t._v(" "),s("div",{staticClass:"icon-item"},[s("div",{staticClass:"text"},[t._v("液位")]),t._v(" "),s("div",{staticClass:"num"},[t._v("暂无")])]),t._v(" "),s("div",{staticClass:"icon-item"},[s("div",{staticClass:"text"},[t._v("液位")]),t._v(" "),s("div",{staticClass:"num"},[t._v("暂无")])]),t._v(" "),s("div",{staticClass:"icon-item"},[s("div",{staticClass:"text"},[t._v("液位")]),t._v(" "),s("div",{staticClass:"num"},[t._v("暂无")])]),t._v(" "),s("div",{staticClass:"icon-item"},[s("div",{staticClass:"text"},[t._v("液位")]),t._v(" "),s("div",{staticClass:"num"},[t._v("暂无")])])])])],1)]),t._v(" "),s("div",{staticClass:"middle"},[s("dv-border-box-8",{staticStyle:{padding:"0.5vh"},attrs:{reverse:!0}},[s("div",{staticStyle:{width:"38vw",height:"54vh",margin:"auto"},attrs:{id:"container"}})])],1),t._v(" "),s("div",{staticClass:"content-right"},[s("div",{staticClass:"right1"},[s("dv-border-box-10",[s("div",{staticStyle:{width:"25vw",height:"21vh",display:"flex","justify-content":"center","align-items":"center"}},[s("video",{staticStyle:{width:"22vw",height:"18vh"},attrs:{id:"myPlayer",controls:"",playsInline:""}},[s("source",{attrs:{src:"https://hls01open.ys7.com/openlive/fe78747055f6492ab39474f5b38916fc.m3u8"}})])])])],1),t._v(" "),s("div",{staticClass:"right2"},[s("dv-border-box-10",[s("div",{staticClass:"title"},[t._v("避障数据")]),t._v(" "),s("div",{staticClass:"data-list"})])],1)])]),t._v(" "),s("div",{staticClass:"bottom"},[s("dv-border-box-10",[s("div",{staticClass:"title"},[t._v("水质数据")]),t._v(" "),s("div",{staticClass:"chart-list"},[s("line-chart",{attrs:{title:"PH","chart-data":t.PH}}),t._v(" "),s("line-chart",{attrs:{title:"电导","chart-data":t.ec}}),t._v(" "),s("line-chart",{attrs:{title:"浊度","chart-data":t.td}}),t._v(" "),s("line-chart",{attrs:{title:"水温","chart-data":t.wt}}),t._v(" "),s("line-chart",{attrs:{title:"溶解氧","chart-data":t.DO}})],1)])],1)])])},e=[],n=(s("c5f6"),s("bd86")),c=s("4259"),d=s.n(c),v=s("b775c"),o={components:{LineChart:v["a"]},data:function(){var t;return t={isFirst:!0,client:null,prePoint:null,x:null,y:null,map:null,deviceId:null,status_data:null},Object(n["a"])(t,"status_data",{}),Object(n["a"])(t,"detect_data",{}),Object(n["a"])(t,"PH",[]),Object(n["a"])(t,"ec",[]),Object(n["a"])(t,"td",[]),Object(n["a"])(t,"wt",[]),Object(n["a"])(t,"DO",[]),t},computed:{Point:function(){var t=this.x,i=this.y;return[t,i]}},watch:{Point:function(t){114.431408!=t[0]&&this.initPoint()}},mounted:function(){this.initMqtt(),this.initMap(),this.deviceId=this.$route.params.deviceId,this.$nextTick((function(){new EZUIPlayer("myPlayer")}))},methods:{initMqtt:function(){var t=Math.random().toFixed(3);this.client=new d.a.Client("47.97.183.24",Number(8083),t),console.log(this.client),this.client.onMessageArrived=this.onMessageArrived,this.client.onConnectionLost=this.onConnectionLost,this.client.connect({onSuccess:this.onConnect})},onConnect:function(){console.log("onConnect"),this.client.subscribe("status_data_".concat(this.deviceId)),this.client.subscribe("detect_data_".concat(this.deviceId))},onMessageArrived:function(t){console.log('"topic" '.concat(t.topic)),"".concat(t.topic)=="status_data_".concat(this.deviceId)&&(this.status_data=JSON.parse(t.payloadString),console.log(this.status_data),this.status_data&&this.status_data.current_lng_lat&&(this.x=this.status_data.current_lng_lat[0],this.y=this.status_data.current_lng_lat[1]),this.map||this.initMap()),"".concat(t.topic)=="detect_data_".concat(this.deviceId)&&(this.detect_data=JSON.parse(t.payloadString),this.PH.push(this.detect_data.water.ph),this.ec.push(this.detect_data.water.ec),this.td.push(this.detect_data.water.td),this.wt.push(this.detect_data.water.wt),this.DO.push(this.detect_data.water.doDo),console.log(this.detect_data))},onConnectionLost:function(t){console.log(t),0!==t.errorCode&&console.log("onConnectionLost:"+t.errorMessage)},initMap:function(){this.x||this.y||(this.x=114.431408,this.y=30.523486);var t=new AMap.Map("container",{zoom:13,center:[this.x,this.y],mapStyle:"amap://styles/001a637581603985681831e1471630a5"});this.map=t},initPoint:function(){this.prePoint&&this.map.remove(this.prePoint);var t=new AMap.Icon({size:new AMap.Size(40,50),image:"http://101.37.119.148:3000/ship.png",imageSize:new AMap.Size(40,50)}),i=new AMap.Marker({position:new AMap.LngLat(this.x,this.y),offset:new AMap.Pixel(-25,-25),icon:t,title:"行星轮",zoom:13});this.prePoint=i,this.map.add(i),this.isFirst&&(this.isFirst=!1,this.map.setFitView())},initTest:function(){var t=this;this.x=115.431408,this.y=30.523486,setInterval((function(){t.x+=.01,t.y+=.01,t.initPoint(t.x,t.y)}),2e3)},goOperation:function(){this.$router.push({path:"/ship/operation/".concat(this.deviceId)})},goIndex:function(){this.$router.push({path:"/equipment/ship/list"})}}},l=o,r=(s("a9ab"),s("2877")),h=Object(r["a"])(l,a,e,!1,null,"573b2b01",null);i["default"]=h.exports},"499d":function(t,i,s){},a9ab:function(t,i,s){"use strict";s("499d")},b775c:function(t,i,s){"use strict";var a=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{class:t.className,style:{height:t.height,width:t.width}})},e=[],n=s("313e"),c=s.n(n),d=s("f97d");s("817d");var v={mixins:[d["a"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"20vw"},height:{type:String,default:"25vh"},autoResize:{type:Boolean,default:!0},chartData:{type:Array,required:!0},title:{type:String,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t,this.title)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=c.a.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(t,i){this.chart.setOption({tooltip:{show:!0},title:{text:i,left:"40%",top:"10%",textStyle:{fontSize:12}},xAxis:{type:"category"},yAxis:{type:"value"},series:[{type:"line",data:t}]})}}},o=v,l=s("2877"),r=Object(l["a"])(o,a,e,!1,null,null,null);i["a"]=r.exports},f97d:function(t,i,s){"use strict";var a=s("ed08");i["a"]={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(a["b"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}}}}]);