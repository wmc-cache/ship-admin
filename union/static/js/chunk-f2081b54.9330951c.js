(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f2081b54","chunk-67460106"],{"1faf":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{"margin-top":"30px"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),i("FilenameOption",{model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}}),t._v(" "),i("BookTypeOption",{model:{value:t.bookType,callback:function(e){t.bookType=e},expression:"bookType"}}),t._v(" "),i("el-button",{staticStyle:{margin:"0 0 20px 20px"},attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-document"},on:{click:t.handleDownload}},[t._v("\n      导出文件\n    ")])],1),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.waterData,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"deviceId",prop:"deviceId",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{label:"td",prop:"td",align:"center",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"ph",prop:"ph",align:"center",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"wt",prop:"wt",align:"center",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"doDo",prop:"doDo",align:"center",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"ec",prop:"ec",align:"center",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center",width:"400"}})],1)],1)},a=[],o=(i("28a5"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"inline-block"}},[i("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[t._v("文件名: ")]),t._v(" "),i("el-input",{staticStyle:{width:"345px"},attrs:{placeholder:"请输入文件名(default excel-list)","prefix-icon":"el-icon-document"},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}})],1)}),l=[],s={props:{value:{type:String,default:""}},computed:{filename:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},r=s,c=i("2877"),d=Object(c["a"])(r,o,l,!1,null,null,null),u=d.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"inline-block"}},[i("label",{staticClass:"radio-label"},[t._v("Cell Auto-Width: ")]),t._v(" "),i("el-radio-group",{model:{value:t.autoWidth,callback:function(e){t.autoWidth=e},expression:"autoWidth"}},[i("el-radio",{attrs:{label:!0,border:""}},[t._v("\n      True\n    ")]),t._v(" "),i("el-radio",{attrs:{label:!1,border:""}},[t._v("\n      False\n    ")])],1)],1)},h=[],v={props:{value:{type:Boolean,default:!0}},computed:{autoWidth:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},m=v,f=Object(c["a"])(m,p,h,!1,null,null,null),b=f.exports,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"inline-block"}},[i("label",{staticClass:"radio-label"},[t._v("类型: ")]),t._v(" "),i("el-select",{staticStyle:{width:"120px"},model:{value:t.bookType,callback:function(e){t.bookType=e},expression:"bookType"}},t._l(t.options,(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)},_=[],y={props:{value:{type:String,default:"xlsx"}},data:function(){return{options:["xlsx","csv","txt"]}},computed:{bookType:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},w=y,x=Object(c["a"])(w,g,_,!1,null,null,null),$=x.exports,k=i("ed08"),C=i("fe27"),E=i("c466"),S={components:{FilenameOption:u,AutoWidthOption:b,BookTypeOption:$},data:function(){return{date:null,waterData:null,filename:"",autoWidth:!0,bookType:"xlsx",downloadLoading:!1}},watch:{date:function(t){var e=this,i=this.$route.params.deviceId,n=this.$route.params.MapId;Object(C["b"])(i,n,Object(E["a"])(t[0]).split(" ")[0],Object(E["a"])(t[1]).split(" ")[0]).then((function(t){e.waterData=t.data.data.water})),console.log(Object(E["a"])(t[0]).split(" ")[0]),console.log(Object(E["a"])(t[1]).split(" ")[0])}},mounted:function(){var t=this.$route.params.deviceId,e=this.$route.params.MapId;Object(C["b"])(t,e).then((function(t){console.log(t)}))},methods:{handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([i.e("chunk-e2dec6d6"),i.e("chunk-58293907")]).then(i.bind(null,"4bf8d")).then((function(e){var i=["deviceId","td","ph","wt","doDo","ec"],n=["deviceId","td","ph","wt","doDo","ec"],a=t.formatJson(n,t.waterData);e.export_json_to_excel({header:i,data:a,filename:t.filename,autoWidth:t.autoWidth,bookType:t.bookType}),t.downloadLoading=!1}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return"timestamp"===t?Object(k["d"])(e[t]):e[t]}))}))}}},z=S,O=Object(c["a"])(z,n,a,!1,null,null,null);e["default"]=O.exports},"36af":function(t,e,i){},"8e0e":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body"},[i("el-dialog",{attrs:{title:"站点数据总览",visible:t.dialogVisible,width:"80%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("water-data-table"),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"menu1"},[t._v("数据总览")]),t._v(" "),i("div",{staticClass:"menu2",on:{click:t.goOperation,touchstart:t.goOperation}},[t._v("设备操作")]),t._v(" "),i("div",{staticClass:"menu3",on:{click:t.goIndex,touchstart:t.goIndex}},[t._v("返回")]),t._v(" "),i("div",{staticClass:"header"},[i("div",{staticClass:"title"},[i("div",{staticClass:"text",staticStyle:{"margin-top":"1vh","margin-bottom":"-1vw"}},[t._v("传感器监控系统")]),t._v(" "),i("dv-decoration-5",{staticStyle:{width:"40vw",height:"5vh"}})],1),t._v(" "),i("div",{staticClass:"tip-item"})]),t._v(" "),i("div",{staticClass:"content-middle"},[i("div",{staticClass:"content-left"},[i("div",{staticClass:"left1"},[i("dv-border-box-10",[i("div",{staticClass:"title"},[t._v(t._s(t.fmt(new Date)))])])],1),t._v(" "),i("div",{staticClass:"left2"},[i("dv-border-box-10",[i("pie-chart",{attrs:{"class-name":"pie",height:"23vh",width:"23vw"}})],1)],1)]),t._v(" "),i("div",{staticClass:"middle"},[i("dv-border-box-8",{staticStyle:{padding:"0.5vh"},attrs:{reverse:!0}},[i("div",{staticStyle:{width:"38vw",height:"54vh"},attrs:{id:"container"}})])],1),t._v(" "),i("div",{staticClass:"content-right"},[i("div",{staticClass:"right1"},[i("dv-border-box-10",[i("div",{staticStyle:{width:"25vw",height:"21vh",display:"flex","justify-content":"center","align-items":"center"}},[i("dv-decoration-12",{staticStyle:{width:"150px",height:"150px"}})],1)])],1),t._v(" "),i("div",{staticClass:"right2"},[i("dv-border-box-10",[i("div",{staticClass:"title"},[t._v("操作")]),t._v(" "),i("div",{staticClass:"scroll-data"},[i("dv-scroll-board",{staticStyle:{width:"26vw",height:"30vh"},attrs:{config:t.config}})],1)])],1)])]),t._v(" "),i("div",{staticClass:"bottom"},[i("dv-border-box-10")],1)])],1)},a=[],o=(i("ac6a"),i("1faf")),l=i("c466"),s=(i("4259"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.className,style:{height:t.height,width:t.width}})}),r=[],c=i("313e"),d=i.n(c),u=i("ed08"),p={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(u["b"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};i("817d");var h={mixins:[p],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=d.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{show:!0},series:[{type:"pie",data:[{value:320,name:"正常状态"},{value:40,name:"异常状态"}],animationEasing:"cubicInOut",animationDuration:2600}]})}}},v=h,m=i("2877"),f=Object(m["a"])(v,s,r,!1,null,null,null),b=f.exports,g=(i("bc3a"),{components:{PieChart:b,waterDataTable:o["default"]},data:function(){return{fmt:l["a"],client:null,x:null,y:null,dialogVisible:!1,map:null,deviceId:null,config:{header:["ID","传感器种类","监测数据"],data:[["1","水温","17.9"],["2","电导率","8.75"],["3","PH","8.69"],["4","浊度","9.4"],["5","溶解氧","295"],["6","水温","17.9"],["7","电导率","8.75"],["8","PH","8.69"],["9","浊度","9.4"],["10","溶解氧","295"]]}}},mounted:function(){var t=this;this.initMap(),[[114.431408,30.523486],[114.431408,30.524486],[114.433408,30.525486]].forEach((function(e){t.icon(e[0],e[1])}))},methods:{initMap:function(){this.x||this.y||(this.x=114.431408,this.y=30.523486);var t=new AMap.Map("container",{zoom:13,viewMode:"3D",center:[this.x,this.y],mapStyle:"amap://styles/001a637581603985681831e1471630a5"});this.map=t},icon:function(t,e){var i=new AMap.Icon({size:new AMap.Size(40,50),image:"https://www.xxlun.com/website/file/sensor.png",imageSize:new AMap.Size(40,50)}),n=new AMap.Marker({position:new AMap.LngLat(t,e),offset:new AMap.Pixel(-20,-20),icon:i,title:"摄像头",zoom:13});n.on("click",this.iconClick),this.map.add(n)},iconClick:function(t){console.log(t.lnglat.lng,t.lnglat.lat);var e="检测站".concat(t.lnglat.lng,",").concat(t.lnglat.lat),i=[];i.push("<img src='http://tpc.googlesyndication.com/simgad/5843493769827749134'>地址：北京市朝阳区阜通东大街6号院3号楼东北8.3公里"),i.push("电话：010-64733333");var n=new AMap.InfoWindow({anchor:"bottom-left",isCustom:!0,content:this.createInfoWindow(e,i.join("<br/>"))});n.open(this.map,["".concat(t.lnglat.lng),"".concat(t.lnglat.lat)])},createInfoWindow:function(t,e){var i=document.createElement("div");i.style.color="#fff",i.style.width="400px",i.style.position="relative";var n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("img");o.style.position="absolute",o.style.right="0",o.style.top="0",o.style.cursor="pointer",o.src="https://webapi.amap.com/images/close2.gif",o.onclick=this.closeInfoWindow,n.style.backgroundColor="#245098",a.innerHTML=t,n.appendChild(o),n.appendChild(a),i.appendChild(n);var l=document.createElement("div");l.style.backgroundColor="#245098",l.innerHTML=e,i.appendChild(l);var s=document.createElement("div");return s.innerHTML="详细信息",s.style.position="absolute",s.style.right="0",s.style.top="40px",s.style.cursor="pointer",s.onclick=this.detailMessage,i.appendChild(s),i},closeInfoWindow:function(){this.map.clearInfoWindow()},detailMessage:function(){this.dialogVisible=!0,console.log("detailMessage")},direction:function(t){"lookup"==t&&console.log(t)},handleClose:function(){this.dialogVisible=!1},goOperation:function(){this.$router.push({path:"/ship/operation/".concat(this.deviceId)})},goIndex:function(){this.$router.push({path:"/equipment/ship/list"})}}}),_=g,y=(i("e7b3"),Object(m["a"])(_,n,a,!1,null,"147d9440",null));e["default"]=y.exports},c466:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("6b54"),i("3b2b"),i("a481");function n(t){var e="yyyy-MM-dd hh:mm:ss",i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,t.getFullYear())),i)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==i[n].toString().length?"0"+i[n]:i[n]));return e}},e7b3:function(t,e,i){"use strict";i("36af")},fe27:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return l})),i.d(e,"d",(function(){return s})),i.d(e,"e",(function(){return r}));var n=i("b775");function a(t,e,i,a){return Object(n["a"])({url:"/admin/xxl/data/getData",method:"get",params:{deviceId:t,mapId:e,startTime:i,endTime:a}})}function o(t){return Object(n["a"])({url:"/admin/xxl/map/list",method:"get",params:{mapId:t}})}function l(t){return Object(n["a"])({url:"/admin/xxl/device/updata",method:"post",data:t})}function s(t,e,i){return Object(n["a"])({url:"/admin/xxl/map/list/".concat(e,"/").concat(i),method:"get",params:{deviceId:t}})}function r(t,e){return Object(n["a"])({url:"/admin/xxl/map/updata",method:"post",params:{mapId:t,name:e}})}}}]);