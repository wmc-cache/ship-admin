(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fbfb1d08"],{3040:function(t,e,i){},"333d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[i("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},n=[];i("c5f6");Math.easeInOutQuad=function(t,e,i,a){return t/=a/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function l(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function c(t,e,i){var a=r(),n=t-a,c=20,s=0;e="undefined"===typeof e?500:e;var u=function t(){s+=c;var r=Math.easeInOutQuad(s,a,n,e);l(r),s<e?o(t):i&&"function"===typeof i&&i()};u()}var s={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&c(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&c(0,800)}}},u=s,d=(i("e8e4"),i("2877")),p=Object(d["a"])(u,a,n,!1,null,"b24e5468",null);e["a"]=p.exports},a888:function(t,e,i){"use strict";i("a481"),i("6762"),i("2fdb");var a={bind:function(t,e,i){var a=t.querySelector(".el-dialog__header"),n=t.querySelector(".el-dialog");a.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var o=function(){return window.document.currentStyle?function(t,e){return t.currentStyle[e]}:function(t,e){return getComputedStyle(t,!1)[e]}}();a.onmousedown=function(t){var e=t.clientX-a.offsetLeft,l=t.clientY-a.offsetTop,r=n.offsetWidth,c=n.offsetHeight,s=document.body.clientWidth,u=document.body.clientHeight,d=n.offsetLeft,p=s-n.offsetLeft-r,m=n.offsetTop,f=u-n.offsetTop-c,h=o(n,"left"),g=o(n,"top");h.includes("%")?(h=+document.body.clientWidth*(+h.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(h=+h.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(t){var a=t.clientX-e,o=t.clientY-l;-a>d?a=-d:a>p&&(a=p),-o>m?o=-m:o>f&&(o=f),n.style.cssText+=";left:".concat(a+h,"px;top:").concat(o+g,"px;"),i.child.$emit("dragDialog")},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}}},n=function(t){t.directive("el-drag-dialog",a)};window.Vue&&(window["el-drag-dialog"]=a,Vue.use(n)),a.install=n;e["a"]=a},b507:function(t,e,i){},b87a:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"船名"},on:{clear:t.handleFilter},model:{value:t.listQuery.deviceName,callback:function(e){t.$set(t.listQuery,"deviceName",e)},expression:"listQuery.deviceName"}}),t._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"位置"},on:{clear:t.handleFilter},model:{value:t.listQuery.position,callback:function(e){t.$set(t.listQuery,"position",e)},expression:"listQuery.position"}}),t._v(" "),i("el-select",{staticClass:"filter-item",attrs:{placeholder:"类型",clearable:""},on:{clear:t.handleFilter},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},[i("el-option",{attrs:{label:"水质监测船",value:"1"}})],1),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("\n\t\t\t查询\n\t\t")])],1),t._v(" "),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"编辑",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{attrs:{"label-width":"100px"}},[i("el-form-item",{attrs:{label:"船名"}},[i("el-input",{attrs:{clearable:"",placeholder:"船名"},model:{value:t.shipName,callback:function(e){t.shipName=e},expression:"shipName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"位置"}},[i("el-input",{attrs:{clearable:"",placeholder:"位置"},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"单位名称"}},[i("el-input",{attrs:{clearable:"",placeholder:"单位名称"},model:{value:t.unitName,callback:function(e){t.unitName=e},expression:"unitName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"平台名称"}},[i("el-input",{attrs:{clearable:"",placeholder:"平台名称"},model:{value:t.platformName,callback:function(e){t.platformName=e},expression:"platformName"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.sureEdit}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"上传图片",visible:t.dialogVisible2,width:"30%","before-close":t.handleClose2},on:{"update:visible":function(e){t.dialogVisible2=e}}},[i("upload")],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.DeviceList,border:"",fit:"","highlight-current-row":"",height:"500"}},[i("el-table-column",{attrs:{fixed:"left",label:"序号",prop:"id",align:"center",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"left",label:"类型",prop:"type",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",[t._v(t._s(t._f("valueFilter")(a.type)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{fixed:"left",label:"船名",prop:"deviceName",align:"center",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{label:"图片",prop:"logUrl",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.logoUrl?i("tokenImg",{attrs:{width:"100px",height:"100px","auth-src":""+a.logoUrl,alt:""}}):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"位置",prop:"position",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{label:"加入时间",prop:"gmtCreate",align:"center",width:"200"}}),t._v(" "),t.showID?i("el-table-column",{attrs:{label:"设备ID",prop:"deviceId",align:"center",width:"200"}}):t._e(),t._v(" "),i("el-table-column",{attrs:{label:"修改时间",prop:"gmtModified",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{label:"平台名称",prop:"platformName",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{label:"单位名称",prop:"corporateName",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center",width:"200",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-button",{staticStyle:{cursor:"pointer"},attrs:{type:"text",icon:"el-icon-view"},on:{click:function(e){return t.goToDetail(a)}}},[t._v("详情\n\t\t\t\t")]),t._v(" "),i("el-button",{staticStyle:{cursor:"pointer"},attrs:{type:"text",icon:"el-icon-view"},on:{click:function(e){return t.selectMap(a)}}},[t._v("历史监测数据\n\t\t\t\t")]),t._v(" "),i("el-button",{staticStyle:{cursor:"pointer"},attrs:{type:"text",icon:"el-icon-view"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑\n\t\t\t\t")]),t._v(" "),i("el-button",{staticStyle:{cursor:"pointer"},attrs:{type:"text",icon:"el-icon-view"},on:{click:function(e){return t.editImage(a)}}},[t._v("修改图片\n\t\t\t\t")])]}}])})],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.pageSize},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"pageSize",e)},pagination:t.refresh}})],1)},n=[],o=(i("96cf"),i("3b8d")),l=(i("386d"),i("e410")),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.url?i("token-img",{key:t.key,attrs:{width:"100px",height:"100px","auth-src":"http://wuhanligong.xxlun.com/union/admin/img/"+t.url}}):t._e(),t._v(" "),i("input",{ref:"input",attrs:{type:"file"},on:{change:t.handleFileChange}}),t._v(" "),i("div",[i("el-button",{on:{click:t.upload}},[t._v("上传文件")]),t._v(" "),i("el-button",{on:{click:t.submit}},[t._v("提交")])],1)],1)},c=[],s=(i("5df3"),i("1c4c"),i("bc3a")),u=i.n(s),d=i("5f87"),p=i("fe27"),m={components:{tokenImg:l["a"]},data:function(){return{urlList:[],url:null,key:0}},methods:{upload:function(){this.$refs.input.click()},handleFileChange:function(t){var e=this,i=t.target;if(i.files){var a=Array.from(i.files);console.log("files",a);var n=new FormData;n.append("file",a[0]),u.a.post("/union/admin/uploadFile",n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(Object(d["a"])())}}).then((function(t){console.log(t.data.data.picName),e.url=t.data.data.picName,e.key++}))}},submit:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=localStorage.getItem("id"),t.next=3,Object(p["a"])({id:"".concat(e),logoUrl:"http://wuhanligong.xxlun.com/union/admin/img/".concat(this.url)});case 3:location.reload();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},f=m,h=(i("f0f3"),i("2877")),g=Object(h["a"])(f,r,c,!1,null,"021fb94a",null),v=g.exports,b=i("333d"),y=i("a888"),w=i("c24f"),_={components:{Pagination:b["a"],upload:v,tokenImg:l["a"]},directives:{elDragDialog:y["a"]},filters:{valueFilter:function(t){return 1==t?"水质监测船":"暂无"}},data:function(){return{total:90,tableKey:0,DeviceList:null,listLoading:!0,showID:!0,dialogVisible:!1,dialogVisible2:!1,shipName:"shipName",platformName:"platformName",unitName:"unitName",position:"position",id:"id",listQuery:{deviceName:null,type:null,page:1,pageSize:10,position:null}}},mounted:function(){var t=this;Object(w["b"])(0,10).then((function(e){t.DeviceList=e.data.items,t.total=e.data.total,t.listLoading=!1}))},methods:{refresh:function(){var t=this;this.listLoading=!0,Object(w["b"])(this.listQuery.page,this.listQuery.pageSize).then((function(e){t.DeviceList=e.data.items,t.total=e.data.total,t.listLoading=!1}))},search:function(){var t=this;for(var e in this.listQuery)""==this.listQuery[e]&&(this.listQuery[e]=null);this.listLoading=!0,Object(w["g"])(0,10,this.listQuery).then((function(e){t.DeviceList=e.data.items,t.total=e.data.total,t.listLoading=!1}))},handleFilter:function(){this.search()},edit:function(t){this.dialogVisible=!0,this.id=t.id,this.position=t.position,this.shipName=t.deviceName,this.platformName=t.platformName,this.unitName=t.corporateName},changeShowCover:function(){showID?this.showID=!1:this.showID=!0},editImage:function(t){this.dialogVisible2=!0,localStorage.setItem("id",t.id)},handleClose:function(){this.dialogVisible=!1},handleClose2:function(){this.dialogVisible2=!1},sureEdit:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["a"])({id:this.id,position:this.position,platformName:this.platformName,deviceName:this.shipName,corporateName:this.unitName});case 2:location.reload();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToDetail:function(t){this.$router.push({path:"/ship/operation/".concat(t.deviceId),query:{platformName:t.platformName,corporateName:t.corporateName,img:t.logoUrl}})},selectMap:function(t){this.$router.push({path:"/equipment/selectMap/".concat(t.deviceId)})}}},x=_,N=Object(h["a"])(x,a,n,!1,null,null,null);e["default"]=N.exports},e410:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("img",{ref:"img"})},n=[],o=i("5f87"),l={name:"AuthImg",props:{authSrc:{type:String,required:!1,default:""}},mounted:function(){var t="Bearer ".concat(Object(o["a"])()),e=this.$refs.img,i=new XMLHttpRequest;i.responseType="blob",i.open("get",this.authSrc,!0),i.setRequestHeader("Authorization",t),i.onreadystatechange=function(t){i.readyState==XMLHttpRequest.DONE&&200==i.status&&(e.src=URL.createObjectURL(i.response),e.onload=function(){URL.revokeObjectURL(e.src)})},i.send(null)}},r=l,c=i("2877"),s=Object(c["a"])(r,a,n,!1,null,null,null);e["a"]=s.exports},e8e4:function(t,e,i){"use strict";i("b507")},f0f3:function(t,e,i){"use strict";i("3040")},fe27:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return l})),i.d(e,"d",(function(){return r})),i.d(e,"e",(function(){return c}));var a=i("b775");function n(t,e,i,n){return Object(a["a"])({url:"/admin/xxl/data/getData",method:"get",params:{deviceId:t,mapId:e,startTime:i,endTime:n}})}function o(t){return Object(a["a"])({url:"/admin/xxl/map/list/0/10",method:"get",params:{mapId:t}})}function l(t){return Object(a["a"])({url:"/admin/xxl/device/upData",method:"post",data:t})}function r(t,e,i){return Object(a["a"])({url:"/admin/xxl/map/list/".concat(e,"/").concat(i),method:"get",params:{deviceId:t}})}function c(t,e){return Object(a["a"])({url:"/admin/xxl/map/upData",method:"post",params:{mapId:t,name:e}})}}}]);