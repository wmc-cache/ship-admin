(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aab44366"],{"5d51":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return c}));var r=n("b775");function i(e,t){return Object(r["a"])({url:"/admin/xxl/role/".concat(e,"/").concat(t),method:"get"})}function l(e){return Object(r["a"])({url:"/admin/xxl/role/save",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/admin/xxl/role/remove/".concat(e),method:"delete"})}function a(e){return Object(r["a"])({url:"/admin/xxl/permission/toAssign/".concat(e),method:"get"})}function c(e,t,n){return Object(r["a"])({url:"/admin/xxl/permission/doAssign",method:"post",params:{permissionId:e,roleId:t,id:n}})}},9808:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-dialog",{attrs:{title:"角色权限编辑",visible:e.dialogVisible2,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible2=t}}},[e.dialogVisible2?n("node",{attrs:{roleId:e.roleId}}):e._e(),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"新增角色",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-input",{staticStyle:{"margin-top":"10px"},attrs:{clearable:"",placeholder:"角色名称"},model:{value:e.rolename,callback:function(t){e.rolename=t},expression:"rolename"}}),e._v(" "),n("el-input",{staticStyle:{"margin-top":"20px"},attrs:{clearable:"",placeholder:"角色描述"},model:{value:e.rolecontent,callback:function(t){e.rolecontent=t},expression:"rolecontent"}}),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.sure}},[e._v("确 定")])],1)],1),e._v(" "),n("div",[n("div",{staticClass:"filter-container"},[n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.add}},[e._v("新增角色")])],1),e._v(" "),n("el-table",{key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.roleList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"id",prop:"id",align:"center",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"角色名",prop:"roleName",align:"center",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"角色描述",prop:"remark",align:"center",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"gmtCreate",prop:"gmtCreate",align:"center",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"gmtModified",prop:"gmtModified",align:"center",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-button",{staticStyle:{cursor:"pointer"},attrs:{type:"text",icon:"el-icon-view"},on:{click:function(t){return e.deleteRole(r.id)}}},[e._v("删除角色\n\t\t\t\t\t")]),e._v(" "),n("el-button",{staticStyle:{cursor:"pointer"},attrs:{type:"text",icon:"el-icon-view"},on:{click:function(t){return e.RoleDetail(r.id,r.roleName)}}},[e._v("角色权限管理\n\t\t\t\t\t")])]}}])})],1)],1)],1)},i=[],l=(n("96cf"),n("3b8d")),o=n("5d51"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}})],1)},c=[];n("7f7f"),n("ac6a"),n("456d");function s(e){if(e&&(e.name&&1==e.select&&0===e.children.length&&window.dfsArr.push(e.id),"string"!==typeof e))return Object.keys(e).forEach((function(t){s(e[t])})),window.dfsArr}window.dfsArr=[];var d={props:{roleId:{type:String,default:!0}},data:function(){return{data:[],defaultProps:{children:"children",label:"label"}}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.init(),e.next=3,Object(o["d"])(this.roleId);case 3:t=e.sent,this.setCheckedKeys(s(t)),window.dfsArr=[];case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getCheckedNodes:function(){console.log(this.$refs.tree.getCheckedNodes())},getCheckedKeys:function(){console.log(this.$refs.tree.getCheckedKeys())},setCheckedNodes:function(){this.$refs.tree.setCheckedNodes([{id:5,label:"二级 2-1"},{id:9,label:"三级 1-1-1"}])},setCheckedKeys:function(e){this.$refs.tree.setCheckedKeys(e)},resetChecked:function(){this.$refs.tree.setCheckedKeys([])},init:function(){this.data=this.$store.state.permission.permissionMenuList,this.data.forEach((function(e){e.label=e.name,e.key=e.id,0!=e.children.length&&e.children.forEach((function(e){e.label=e.name,e.key=e.id,0!=e.children.length&&e.children.forEach((function(e){e.label=e.name,e.key=e.id,0!=e.children.length&&e.children.forEach((function(e){e.label=e.name,e.key=e.id,0!=e.children.length&&e.children.forEach((function(e){e.label=e.name,e.key=e.id}))}))}))}))}))}}},u=d,h=n("2877"),f=Object(h["a"])(u,a,c,!1,null,null,null),p=f.exports,b={components:{node:p},data:function(){return{roleId:0,roleList:null,tableKey:0,dialogVisible:null,dialogVisible2:null,rolename:null,rolecontent:null}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["c"])(0,5);case 2:t=e.sent,this.roleList=t.data.items,console.log("role",this.roleList);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{add:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},deleteRole:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["b"])(t);case 2:location.reload();case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),sure:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])({roleName:this.rolename,remark:this.rolecontent});case 2:location.reload();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),RoleDetail:function(e,t){this.$router.push({path:"/roles/detail/".concat(e,"/").concat(t)})},treeRoles:function(e){this.roleId=e.id,this.dialogVisible2=!0}}},m=b,g=Object(h["a"])(m,r,i,!1,null,null,null);t["default"]=g.exports}}]);